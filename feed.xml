<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>Tinple</title>
    <link href="http://tinple.me/feed" rel="self" />
    <link href="http://tinple.me/" />
    <updated>2014-10-15T10:25:19+08:00</updated>
    <id>http://tinple.me/</id>
    <entry>
        <title type="html"><![CDATA[Work with IPTables]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/tech/work-with-iptables"/>
        <published>2014-09-25T00:00:00+08:00</published>
        <updated>2014-09-28T10:54:14+08:00</updated>
        <id>http://tinple.me/tech/work-with-iptables</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <p>Nowadays I happened to <code>IPTables</code> again. To be honest, I&#39;m not familiar with it.
This post is just my note about working with <code>IPTables</code> these days.</p>

<h2 id="toc_0">What&#39;s iptables?</h2>
<p><code>CentOS</code> has a powerful firewall, that&#39;s called <code>iptables</code>, aka <code>iptables/netfilter</code>.
It&#39;s the userscope module, and <code>netfilter</code> is a kernel module, built into the kernel,
that actually does the filtering.</p>
<p><code>IPTables</code> places rules into predefined chains(INPUT, OUTPUT and FORWORD) that are 
checked against any traffic(IP packets) relevant to those chains. And a decision is
made about what to do with each packet based upon the outcome of those rules, for 
example, accepting or dropping.</p>

<h2 id="toc_1">Chains</h2>
<p>There are 3 predefined chains in the filter table to which we can add rules for 
processing IP packets passing through those chains.</p>

<ul>
<li>INPUT - All packets destined for the host computer.</li>
<li>OUTPUT - All packets originating from the host computer.</li>
<li>FORWARD - All packets neither destined for nor originating the host, but passing 
through the host computer.</li>
</ul>
<p>A packet is checked against each rule in turn, starting at the top, and if it 
matches the rule, then an action is taken such as accepting(ACCEPT) or dropping
(DROP) the packet. Once a rule has been matched and an action taken, then the 
packet is processed according to the outcome of that rule and isn&#39;t processed by
further rules in the chain.</p>

<h2 id="toc_2">Begin Start</h2>
<p>We can use <code>iptables -L</code> to inspect the currently loaded rules.
This is <a href="http://www.aliyun.com">aliyun</a> server, we can see the default set
of rules. The default set seems that the firewall is the same as closed.</p>

<pre><code>Chain INPUT (policy ACCEPT)
target     prot opt source               destination

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination</code></pre>
<p>P.S. If <code>iptables</code> is not running, you can enable it by running:</p>

<pre><code># system-config-securitylevel</code></pre>

<h2 id="toc_3">Server Setups</h2>
<p>At first, I&#39;ll explain our server setups. We have 5 servers totally.
And we use <a href="https://www.digitalocean.com/community/tutorials/5-common-server-setups-for-your-web-application">Load Balancer</a> policy to setup our servers:</p>

<ol>
<li>One Load Balancer Server(Reverse Proxy)</li>
<li>Three app-backend Servers</li>
<li>One Database Server</li>
</ol>
<p>OK, it&#39;s time to go start. At first, we decide the following basic <code>iptables</code> policies.
For Reverse Proxy server, we only open port 22 and 80, allowing tcp packets that
have specific bits(flags) set, to match a rule. For three app-backend servers, we
just open port 22 and 80. For database server, we open the port 22 and database port.</p>

<h2 id="toc_4">Set IPTables Rule (Load Balancer Server)</h2>
<p>At first, we may add a rule allowing SSH connections over tcp port 22. This is to 
prevent accidental lockouts when working on remote systems over an SSH connection.</p>

<pre><code># iptables -A INPUT -p tcp -m tcp --dport 22 -j ACCEPT</code></pre>
<p>And the same as HTTP connections over tcp port 80.</p>

<pre><code># iptables -A INPUT -p tcp -m tcp --dport 80 -j ACCEPT</code></pre>
<p>Then we may allow all incoming packets destined for the localhost interface to be
accepted. This is generally required as many software applications expect to be
able to communicate with the localhost adaptor.</p>

<pre><code># iptables -A INPUT -i lo -j ACCEPT</code></pre>
<p>After these basic setting rules, we add three tcp packets that have specific bits
(flags) rules.</p>

<pre><code># -A INPUT -p tcp -m tcp --tcp-flags FIN,SYN,RST,PSH,ACK,URG FIN,SYN,RST,PSH,ACK,URG -j DROP 
# -A INPUT -p tcp -m tcp ! --tcp-flags FIN,SYN,RST,ACK SYN -m state --state NEW -j DROP
# -A INPUT -p tcp -m tcp --tcp-flags FIN,SYN,RST,PSH,ACK,URG NONE -j DROP</code></pre>
<p>Then we add the last rule to the INPUT chain. <code>ESTABLISHED</code> and <code>RELATED</code> refers to
incoming packets that are part of an already established connection or related to
and already established connection.</p>

<pre><code># iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT</code></pre>
<p>At last, we set the default policy on the INPUT chain and FORWARD chain.</p>

<pre><code># iptables -P INPUT DROP
# iptables -P FORWARD DROP</code></pre>
<p>Now we can see our <code>iptables</code> setting.</p>

<pre><code># iptables -S
-P INPUT DROP
-P FORWARD DROP
-P OUTPUT ACCEPT
-A INPUT -p tcp -m tcp --dport 22 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 80 -j ACCEPT
-A INPUT -i lo -j ACCEPT
-A INPUT -p tcp -m tcp --tcp-flags FIN,SYN,RST,PSH,ACK,URG FIN,SYN,RST,PSH,ACK,URG -j DROP
-A INPUT -p tcp -m tcp ! --tcp-flags FIN,SYN,RST,ACK SYN -m state --state NEW -j DROP
-A INPUT -p tcp -m tcp --tcp-flags FIN,SYN,RST,PSH,ACK,URG NONE -j DROP
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT</code></pre>
<p>It seems fine, and our iptables on <code>Reverse Proxy Server</code> needs to be saved.</p>

<pre><code># /sbin/service iptables save</code></pre>
<p>For other three app-backend servers:</p>

<pre><code># iptables -S
-P INPUT DROP
-P FORWARD DROP
-P OUTPUT ACCEPT
-A INPUT -p tcp -m tcp --dport 22 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 80 -j ACCEPT
-A INPUT -i lo -j ACCEPT
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT</code></pre>
<p>And the database server:</p>

<pre><code># iptables -S
-P INPUT DROP
-P FORWARD DROP
-P OUTPUT ACCEPT
-A INPUT -p tcp -m tcp --dport 22 -j ACCEPT
-A INPUT -p tcp -m tcp --dport [Your_database_port] -j ACCEPT
-A INPUT -i lo -j ACCEPT
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT</code></pre>

<h2 id="toc_5">End</h2>
<p>If you have something to correct, welcome to point it out:D</p>

<h3 id="toc_6">References:</h3>

<ul>
<li><a href="http://wiki.centos.org/HowTos/Network/IPTables">wiki-centos-iptables</a></li>
<li><a href="http://www.centos.org/docs/5/html/Deployment_Guide-en-US/ch-iptables.html">ch-iptables</a></li>
</ul>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[Nodejs in production]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/tech/nodejs-in-production"/>
        <published>2014-09-24T00:00:00+08:00</published>
        <updated>2014-10-15T10:25:19+08:00</updated>
        <id>http://tinple.me/tech/nodejs-in-production</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <p>Last two days, I deploy a <code>nodejs</code> production environment on a vps.
The process is hard but fun. Hence, I post this essay to note.
My project is based on <a href="http://koajs.com">koa</a>, using 
<a href="https://www.mongodb.org/">mongodb</a> to store data.</p>
<p>As we know, when running a node application in production, we need
to keep stability, performance, security, and maintainability in mind.</p>

<h2 id="toc_0">Begin</h2>
<p>At begin, my initial idea is to use <code>nginx</code> to proxy <code>nodejs</code> app. And the
<code>nginx</code> plays a <strong>Load Balancer</strong> role, improving performance and
reliability by distributing the workload across multiple servers,
working as a front end server. What&#39;s more, your static files 
can also be handled much better.</p>

<h2 id="toc_1">Install Node.js &amp;&amp; MongoDB</h2>

<h3 id="toc_2">Node.js</h3>
<p>My vps is <code>CentOS</code>, the first thing we need to do is to install <code>node</code>.</p>
<p>P.S. As I use <a href="http://koajs.com">koa</a>, so I install version 0.11.9.</p>

<pre><code>$ wget http://nodejs.org/dist/v0.11.9/node-v0.11.9.tar.gz
$ tar zxvf node-v0.11.9.tar.gz
$ cd node-v0.11.9
$ ./configure
$ make
$ sudo make install</code></pre>
<p>After these things done, we can check our install.</p>

<pre><code>$ node -v
0.11.9
$ npm -v
1.3.15</code></pre>

<h3 id="toc_3">MongoDB</h3>
<p>For <code>Mongo</code>, we can follow the official installation with <code>RedHat</code>.</p>

<pre><code>$ vim /etc/yum.repos.d/mongodb.repo</code></pre>
<p>For 64-bit system, add the following information to the repo file.</p>

<pre><code>[mongodb]
name=MongoDB Repository
baseurl=http://downloads-distro.mongodb.org/repo/redhat/os/x86_64
gpgcheck=0
enabled=1</code></pre>
<p>Now to install <code>MongdoDB</code>.</p>

<pre><code>yum install mongo-10gen mongo-10gen-server</code></pre>
<p>In my production, we need to open the mongod auth, edit <code>/etc/mongod.conf</code>
to set <code>auth=true</code>.</p>
<p>And at last, we can use <code>service mongod start</code> or <code>/etc/init.d/mongod start</code>
to start mongodb.:D</p>

<h2 id="toc_4">nginx.conf</h2>
<p>As the idea above, we need to configure <code>nginx.conf</code> to proxy our app.
As I&#39;ll explain, nginx is used for almost everything: gzip encoding,
static file serving, HTTP caching, SSL handling, load balancing and
spoon feeding clients. Here is my main nginx config:</p>

<pre><code>http {
    ...
    server {
        listen 80;
        server_name reg.hduisa.cn;

        location ~ ^/(images/|img/|javascript/|js/|css/|stylesheets/|flash/|media/|static/|robots.txt|humans.txt|favicon.ico) {
            root /home/wwwroot/reg.hduisa.cn/public;
            access_log off;
            expires max;
        }

        location / {
            proxy_pass 127.0.0.1:3000/;
        }

        access_log /home/wwwlogs/req.hduisa.cn.log access;
    }
    ...
}</code></pre>
<p>The most important part of the section is <code>proxy_pass</code>, this tells nginx to proxy
correctly. And for static assets, any requests for with a URI starting with images,
img, css, js&hellip;will be matched by this location. If you want to proxy multi apps, 
you can use <code>upstream</code>. The upstream directive specifies that these two instances 
work in tandem as an upstream server for nginx(not only two).</p>

<pre><code>http {
    ...
    upstream reg_hduisa_cn_upstream {
        server 127.0.0.1:3000;
        server 127.0.0.1:3001;
        keepalive 64;
    }
    server {
        ...
        location / {
            proxy_pass http://reg_hduisa_cn_upstream;
        }
        ...
    }   
}</code></pre>
<p>Now we can pay attention to our app. At first, we should create a user.</p>

<h2 id="toc_5">Create Web User</h2>
<p>For the security of our server, we should not run the app with root. So I create
a web user for my own.</p>

<pre><code>$ useradd -mrU koa -p password
$ su koa</code></pre>
<p>And I use <code>pm2</code> to manage my app. We need install it.
And for globally npm install, we can detect whether the <code>$NODE_PATH</code> includes 
the location that npm installs globally or not.</p>

<pre><code>$ which node
/usr/local/bin/node
$ which npm
/usr/local/bin/npm
$ echo $NODE_PATH</code></pre>
<p>My <code>$NODE_PATH</code> is null, so add </p>

<pre><code>export NODE_PATH=/usr/local/lib/node_modules</code></pre>
<p>to my <code>.bash_profile</code> or <code>.zshrc</code>. The path is not absolute, it depends 
on your node directory. Now we can install pm2 globally.</p>

<pre><code>$ npm install pm2 -g</code></pre>
<p>As my koa app needs <code>--harmony</code> flag, we use pm2 to start.</p>

<pre><code>$ pm2 start /home/wwwroot/reg.hduisa.cn/app.js --name reg.hduisa.cn --node-args=&quot;--harmony-generators&quot; --watch</code></pre>
<p>OK, that&#39;s the whole thing, you can see the process by</p>

<pre><code>$ pm2 list</code></pre>

<h2 id="toc_6">End</h2>
<p>This&#39;s my first deployment with nodejs on production, if you have something to correct,
welcome to point it:D</p>

<h3 id="toc_7">References:</h3>

<ul>
<li><a href="http://docs.mongodb.org/manual/tutorial/install-mongodb-on-red-hat-centos-or-fedora-linux/">install-mongodb-on-red-hat-centos</a></li>
<li><a href="http://blog.carbonfive.com/2014/06/02/node-js-in-production/">nodejs-in-production</a></li>
<li><a href="http://blog.argteam.com/coding/hardening-node-js-for-production-part-2-using-nginx-to-avoid-node-js-load/">nodejs-for-production-part-2</a></li>
</ul>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[callbacks with for loop]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/tech/callbacks-with-for-loop"/>
        <published>2014-08-13T00:00:00+08:00</published>
        <updated>2014-09-24T16:58:26+08:00</updated>
        <id>http://tinple.me/tech/callbacks-with-for-loop</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <p>When I play some ctf games, usually I need to blast some interface like post a certain length of string which contains numbers and letters. </p>
<p>Let&#39;s say we have a url <code>www.example.com/hack</code>, we need to get the information after post correct token. We already know the token&#39;s length is three, containing numbers.</p>
<p>Now we may write payload like this.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">blast</span> <span class="o">=</span> <span class="s1">&#39;0123456789&#39;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;request&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;www.example.com/hack&#39;</span><span class="p">;</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">blast</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">blast</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">k</span> <span class="o">&lt;</span> <span class="nx">blast</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span><span class="nx">form</span><span class="o">:</span><span class="p">{</span> <span class="nx">token</span><span class="o">:</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">j</span> <span class="o">+</span> <span class="nx">k</span> <span class="p">}},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="nx">j</span> <span class="o">+</span> <span class="nx">k</span><span class="p">);</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>OK, we have our first magical blast payload ready. 
Here&#39;s what you think will happen:</p>

<ol>
<li>in a for loop, post token from 000 to 999</li>
<li>if find the respond body with keywords <strong>key</strong>, print token and body</li>
</ol>
<p>However, <code>Node</code> is asynchronous. The request post will return before it even starts 
the post. It will return back to your for loop. And your for loop will move on to the
next file. And the next one.</p>
<p>We have to wait for the callback. When it&#39;s called, only then do post our next
number token. In other words, we need to call another function inside our callback.
And this function needs to start post next number token. Hence, maybe we need
a recursive function to do this.</p>
<p>A nice little recursive pattern we can use for this case:</p>

<pre><code>var request = require('request');
var url = 'www.example.com/hack';
function blast(num) {
    if (num &gt;= 000 &amp;&amp; num &lt;= 999) {
        request.post(url, {form:{ token: num }}, function (err, res, body) {
            if (body.indexOf('key') !== -1) {
              console.log(i + j + k);
              console.log(body);
            } else {
                blast(++num);
            }
        })
    }
}
blast(000);</code></pre>
<p>In short, the pattern can be this:</p>

<pre><code>repeater(i) {
    if (statement) {
        aysnc(function () {
            repeater(++i)
        })
    }
}</code></pre>

<h2 id="toc_0">Referemce</h2>

<ul>
<li><a href="http://www.richardrodger.com/2011/04/21/node-js-how-to-write-a-for-loop-with-callbacks/#.VCJ-ciuSy8Q">How to Write a For Loop With Callbacks</a></li>
</ul>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[Harmony generator , for-of and co]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/tech/harmony-generator-and-co"/>
        <published>2014-05-15T00:00:00+08:00</published>
        <updated>2014-09-24T15:15:12+08:00</updated>
        <id>http://tinple.me/tech/harmony-generator-and-co</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <h2 id="toc_0"><em>Begin</em></h2>
<p>We talk about the new stuff with <code>harmony</code>, so make sure your <code>harmony mode</code> is enabled. With Chrome, go <code>chrome://flags/</code>, search <code>harmony</code> and enable it. With node, you need <code>0.11.*</code> version, and execute <code>node --harmony</code>. For me, I use <a href="https://github.com/visionmedia/n">n</a> to manage my node version, which is powered by TJ.</p>

<h2 id="toc_1"><em>Generator</em></h2>
<p>These days I was diving into <code>Harmony generator</code>, it is defined in <code>ES6</code>. So what calls generator? Let&#39;s begin with a simple code.</p>
<div class="highlight"><pre><span class="kd">function</span><span class="o">*</span> <span class="nx">gen</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">yield</span> <span class="nx">index</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">gen</span> <span class="o">=</span> <span class="nx">gen</span><span class="p">();</span>
<span class="nx">gen</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span> <span class="c1">// return {value: 0, done: false}</span>
<span class="nx">gen</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span> <span class="c1">// return {value: 1, done: false}</span>
<span class="c1">//...</span>
</pre></div>
<p>As you can see, <code>function gen</code> has a method called <strong>next</strong>. This method returns an object with two properties: value and done. The value can be any value, and the done will be read as a boolean to distinguish whether the iterator has already to the end.</p>
<p>A simple iterator implement:</p>
<div class="highlight"><pre><span class="kd">function</span> <span class="nx">gen</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">next</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span>
                <span class="p">{</span><span class="nx">vale</span><span class="o">:</span> <span class="nx">array</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">],</span> <span class="nx">done</span><span class="o">:</span> <span class="kc">false</span><span class="p">}</span> <span class="o">:</span>
                <span class="p">{</span><span class="nx">done</span><span class="o">:</span> <span class="kc">true</span><span class="p">};</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>You may also notice the grammer <code>function*</code>, that&#39;s called <code>generator function</code>, and you can use keyword <code>field</code> there, which works combined with <code>next()</code>. When <code>next</code> is invoked, it starts the execution of the generator. The generator runs until it encounters a <code>yield</code> expression. Then it pauses and the execution goes back to the code that called <code>next</code>.</p>
<p>You can also pass parameters to <code>next()</code>. It behaves like this:</p>
<div class="highlight"><pre><span class="kd">function</span><span class="o">*</span> <span class="nx">gen</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">yield</span> <span class="nx">index</span><span class="o">++</span><span class="p">;</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="cm">/**  yield and next</span>
<span class="cm"> * gen() is invoked by a next.</span>
<span class="cm"> * when execute gen.next(88), the generator runs until</span>
<span class="cm"> * it encounter a yield and pauses, but not give the value</span>
<span class="cm"> * to res. when execute gen.next(888), it goes back to the</span>
<span class="cm"> * code and give the value to res, and the value is the </span>
<span class="cm"> * parameter passed to next.</span>
<span class="cm"> */</span>
<span class="kd">var</span> <span class="nx">gen</span> <span class="o">=</span> <span class="nx">gen</span><span class="p">();</span> <span class="c1">// gen() is not invoked there</span>
<span class="nx">gen</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="mi">88</span><span class="p">);</span> <span class="c1">// {value: 1, done: false} </span>
<span class="nx">gen</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="mi">888</span><span class="p">);</span> <span class="c1">// 888</span>
</pre></div>
<p>It is like another way to execute callback. However, we can code synchronously to express the asynchronous progress without nested function.</p>

<h2 id="toc_2"><strong>for-of</strong></h2>
<p>This expression is used to iterate over iterable objects(including Array, Map, Set, arguments object and so on). Just a generator comprehension.</p>
<div class="highlight"><pre><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="nx">of</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span> <span class="o">*</span> <span class="nx">i</span><span class="p">);</span> 
<span class="p">}</span>
<span class="c1">// 1, 4, 9</span>
</pre></div>

<h2 id="toc_3"><em>co</em></h2>
<p><code>co</code> is an ultimate generator made by TJ, using thunks or promises. A simple co example:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">co</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;co&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">read</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">co</span><span class="p">(</span><span class="kd">function</span> <span class="o">*</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">yield</span> <span class="nx">read</span><span class="p">(</span><span class="s1">&#39;1.txt&#39;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">yield</span> <span class="nx">read</span><span class="p">(</span><span class="s1">&#39;2.txt&#39;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">yield</span> <span class="nx">read</span><span class="p">(</span><span class="s1">&#39;3.txt&#39;</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">([</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">]);</span>
<span class="p">})();</span>
</pre></div>
<p>We pass a generator <code>fn</code> to <code>co</code> and <code>co</code> return a <code>thunk</code>. A <code>thunk</code> is just like the traditional node-style callback whith a signature of: <code>(err, res)</code>.</p>
<div class="highlight"><pre><span class="c1">// read thunk</span>
<span class="kd">function</span> <span class="nx">read</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">encoding</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">encoding</span><span class="p">,</span> <span class="nx">cb</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="c1">//invoke</span>
<span class="nx">read</span><span class="p">(</span><span class="s1">&#39;package.json&#39;</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">)(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">str</span><span class="p">){</span>
    <span class="c1">//...</span>
<span class="p">})</span>
</pre></div>
<p>Actually, in <code>co</code>, the <code>yieldable</code> objects supports thunks, promises, generators, generator functions and array. <code>co</code> will iterate many times until the <code>fn.done</code> is <code>true</code>. A most simple <code>co</code> implement:</p>
<div class="highlight"><pre><span class="kd">function</span> <span class="nx">co</span><span class="p">(</span><span class="nx">GenFunc</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">gen</span> <span class="o">=</span> <span class="nx">GenFunc</span><span class="p">();</span>
    <span class="p">(</span><span class="kd">function</span> <span class="nx">next</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">gen</span><span class="p">.</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">gen</span><span class="p">.</span><span class="nx">next</span><span class="p">().</span><span class="nx">done</span> <span class="o">?</span> <span class="nx">cb</span> <span class="o">&amp;&amp;</span> <span class="nx">cb</span><span class="p">()</span> <span class="o">:</span> <span class="nx">next</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">})();</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p><code>co</code> also support passing arguments into the generator.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">exec</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;co-exec&#39;</span><span class="p">);</span>
<span class="nx">co</span><span class="p">(</span><span class="kd">function</span> <span class="o">*</span><span class="p">(</span><span class="nx">cmd</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">yield</span> <span class="nx">exec</span><span class="p">(</span><span class="nx">cmd</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
<span class="p">})(</span><span class="s1">&#39;pwd&#39;</span><span class="p">,</span> <span class="nx">done</span><span class="p">);</span> <span class="c1">// done is the callback function</span>
</pre></div>
<p><code>co</code> support error handle as well. And in <a href="https://github.com/visionmedia/co">github</a>, it says:</p>

<blockquote>
<p>Co is careful to relay any errors that occur back to the generator, including those within the thunk, or from the thunk&#39;s callback.</p>
</blockquote>
<p>At last, I&#39;m strongly recommend that you should <strong>read co&#39;s source code</strong>, it is less than 300 lines. Have fun:D</p>

<h2 id="toc_4"><em>Reference</em></h2>

<ul>
<li><a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Guide/The_Iterator_protocol">MDN-The-Iterator-protocol</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of">MDN-for-of</a></li>
<li><a href="http://domenic.me/2013/09/06/es6-iterators-generators-and-iterables/">es6-iterators-generators-and-iterables</a></li>
<li><a href="https://github.com/visionmedia/co">co</a></li>
</ul>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[What&#39;s Promises?]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/tech/what-is-promises"/>
        <published>2014-04-18T00:00:00+08:00</published>
        <updated>2014-09-24T15:16:38+08:00</updated>
        <id>http://tinple.me/tech/what-is-promises</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <h2 id="toc_0"><em>Asynchronous &amp;&amp; Callback</em></h2>
<p>When <code>Node</code> brings us an asynchronous world, our applications begin to become non-blocking and much faster.
However, it also makes our code complex and unpredictable.
See this simple code:</p>
<div class="highlight"><pre><span class="kd">function</span> <span class="nx">readJSON</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">return</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="nx">res</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></div>
<p>The code above is somewhat ugly and we actually can&#39;t make sure what arguments input to callback, and we must do try-catch for <code>JSON.parse</code> to handle the error. Luckily, a solution for asynchronous called <code>Promises</code> help us handle errors naturally and make code clean.</p>

<h2 id="toc_1"><em>Promises</em></h2>
<p>As its name means, a promise represents the result of an asynchronous operation with three states:</p>

<ul>
<li>Pending - The initial state</li>
<li>Fulfilled - A successful operation</li>
<li>Rejected - A failed operation</li>
</ul>
<p>And once a promise is fulfilled or rejected, it is immutable. </p>

<h3 id="toc_2"><em>Begin Promise</em></h3>
<p>Let&#39;s begin with such codes:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">Promise</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;promise&#39;</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">readFile</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="nx">enc</span><span class="p">){</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nx">Promise</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">fulfill</span><span class="p">,</span> <span class="nx">reject</span><span class="p">){</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="nx">enc</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="k">else</span> <span class="nx">fulfill</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">readJSON</span><span class="p">(</span><span class="nx">filename</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">readFile</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">res</span><span class="p">));</span>
  <span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>
</pre></div>
<p>As we can see, we re-write our <code>readJSON</code> function, there is no unpredictable callback and we almost use <code>Promise</code> to finish our code. In our code, we use <code>new Promise</code> to construct the promise, which requires a function called resolver, and the resolver function is passed two arguments: resolve and reject.</p>
<div class="highlight"><pre><span class="k">new</span> <span class="nx">Promise</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">{})</span>
</pre></div>

<h3 id="toc_3"><em>resolve and reject</em></h3>
<p>The resolve and reject should be called with a single argument, and promise will be fulfilled or rejected with that value. A special situation is when resolve is called with a promise(A) then the returned promise takes on the state of that new promise(A). </p>
<p>Things go easily in promise, we only need to pass the value to <code>resolve()</code> or <code>reject()</code> to wait for the result and then handle it through <code>then()</code>. We do not care the asynchronous action&#39;s creation time and eventual success or failure, just let asynchronous methods return values like 
synchronous methods. So what actually <code>then()</code> is?</p>

<h3 id="toc_4"><em>Promise.prototype.then(onFulfilled, onRejected)</em></h3>
<p>This prototype method follows the <a href="http://promises-aplus.github.io/promises-spec/">Promises/A+ spec</a>. 
Simply to say, it appends fulfillment and rejection handlers to the promise, and returns a new promise resolving to the return value of the called handler. And it can be chained.</p>
<div class="highlight"><pre><span class="k">new</span> <span class="nx">Promise</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">fulfill</span><span class="p">,</span> <span class="nx">reject</span><span class="p">){})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">onFulfilled</span><span class="p">,</span> <span class="nx">onRejected</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">onFulfilled</span><span class="p">,</span> <span class="nx">onRejected</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">onFulfilled</span><span class="p">,</span> <span class="nx">onRejected</span><span class="p">)</span>
<span class="c1">// ...</span>
</pre></div>

<h2 id="toc_5">Browser</h2>
<p>Actually, there is not only node module <a href="https://github.com/then/promise">promise</a> support <code>Promises</code>, in some browser, like Chrome 32 and latest Firefox, have already support it. It is similar to what we write before.</p>
<div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">Promise</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Promise</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
        <span class="nx">request</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;http://api.icndb.com/jokes/random&#39;</span><span class="p">);</span>
        <span class="nx">request</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">response</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nb">Error</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">statusText</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">};</span>
        <span class="nx">request</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">reject</span><span class="p">(</span><span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Error fetching data&#39;</span><span class="p">));</span>
        <span class="p">};</span>
        <span class="nx">request</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
    <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">).</span><span class="nx">value</span><span class="p">.</span><span class="nx">joke</span><span class="p">);</span>
    <span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">})</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Promise is not supported&#39;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

<h2 id="toc_6">More static methods</h2>
<p>We have seen how promises help us to do with complex asynchronous code, actually, there are more advanced patterns for promise use and some of the helper methods 
may make our Promise more concise. I just refer it simply.</p>

<ul>
<li>Promise.resolve(value)</li>
<li>Promise.reject(reason)</li>
<li>Promise.all(iterable)</li>
<li>Promise.race(iterable)</li>
</ul>
<p>If you want to read more, see <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">MDN</a> or
<a href="https://www.promisejs.org/patterns/">Promise/A+</a>.</p>

<h2 id="toc_7">Reference</h2>

<ul>
<li><a href="https://www.promisejs.org/">Promise/A+</a></li>
<li><a href="https://github.com/then/promise">then/Promise</a></li>
<li><a href="http://www.sitepoint.com/overview-javascript-promises/">overview-javascript-promises</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">MDN</a></li>
</ul>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[Learn about unicode]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/tech/learn-about-unicode"/>
        <published>2014-03-18T00:00:00+08:00</published>
        <updated>2014-09-24T14:50:58+08:00</updated>
        <id>http://tinple.me/tech/learn-about-unicode</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <p>Actually, I have been confused about <code>character encoding</code> for a long time, and really can not figure out the relation with <code>Unicode</code> and <code>UTF-8</code>. And after my whole afternoon effort, googling many information and reading lots of posts, finally I get a preliminary understanding about it. I will try my best to explain it distinctly.</p>

<h2 id="toc_0">Before Unicode</h2>
<p>It would be a long story to explain how unicode comes. Before its existence,
a character encoding named <strong>ASCII</strong> was created by America, is trying to rule the relation with English and Binary. And one byte corresponds one character. For more detail, see <a href="http://en.wikipedia.org/wiki/ASCII">there</a>.</p>
<p>However, <strong>ASCII</strong> only includes 128 characters encoding. As for other languages, it is not enough. Hence, many charsets based on ASCII appears like <strong>ISO 8859</strong>,  trying to extend more characters encoding to express more language.</p>

<h2 id="toc_1">Unicode</h2>
<p>There are many encoding existing all over the world. And it would be handy if there is a encoding includes all characters, and every character corresponds one unique encoding. Hence, <code>Unicode</code> exists, trying to make it. <code>Unicode</code> is a <strong>charset</strong> which can include more than one millionsymbols, and every character encoding is unique. And <code>Unicode</code> identifies characters by a name and an interger number called its code point. For example, Â© is named &ldquo;copyright sign&rdquo; and has <code>U+00A9</code> - <code>0xA9</code> can bewritten as <code>169</code> in decimal - as its code point.</p>
<p>On <a href="http://en.wikipedia.org/wiki/Unicode">Unicode wiki</a>, we can learn that the Unicode code space is divided into seventeen planes of 2^16 code points each. Some of these code points have not yet been assigned character values, some are reserved for private use, and some are permanently reserved as non-characters. The code points in each 
plane have the hexadecimal values <code>xy0000</code> to <code>xyFFFF</code>, where <code>xy</code> is a hex value from <code>00</code> to <code>10</code>, signifying which plane 
the values belong to. Usually we use the first plane(xy is 00) most, which called the <strong><em>Basic Multilingual Plane</em></strong> or <strong><em>BMP</em></strong>. It contains the code points from <code>U+0000</code> to <code>U+FFFF</code>. And it may express one character more than one byte.</p>

<h2 id="toc_2">Problem</h2>
<p>However, <code>Unicode</code> is just a symbol set, which doesn&#39;t rule how to
save binary code. Although <code>Unicode</code> like <code>U+4E25</code> can even 
express a Chinese character like <code>ä¸¥</code>, how can computer regard it as 
<code>ASCII</code> or <code>Unicode</code>? </p>
<p>As we know, an english alphabet just needs one byte, if we rule <code>Unicode</code> uniformly, it can cause many waste. </p>

<h2 id="toc_3">Implement</h2>
<p>Hence, based on such problem, many implementations appear try to make it, like <code>UTF-8</code>, <code>UTF-16</code>, <code>UCS-2</code> and many more.</p>

<h3 id="toc_4">UTF-16 &amp;&amp; UCS-2</h3>
<p><code>UTF-16</code> is an implement which express a character using two or four bytes, while <code>UCS-2</code> just uses two bytes.</p>

<h3 id="toc_5">UTF-8</h3>
<p>Actually, <code>UTF-8</code> is the most popular one in internet. It is flexible
to express a character using one to four bytes, and can change the length
of byte according to different character. Next is a rule of the <code>UTF-8</code> encoding.</p>

<pre><code>/*
Unicode             | UTF-8
hexadecimal         | binary
0000 0000-0000 007F | 0xxxxxxx     One byte
0000 0080-0000 07FF | 110xxxxx 10xxxxxx    Two bytes
0000 0800-0000 FFFF | 1110xxxx 10xxxxxx 10xxxxxx    Three bytes
0001 0000-0010 FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx 
*/</code></pre>

<h2 id="toc_6">End</h2>
<p>This is just my little learning about unicode, if you want to learn more details, visit <a href="en.wikipedia.org/wiki/Unicode">wiki</a> to have fun.</p>

<h2 id="toc_7">Reference</h2>

<ul>
<li><a href="http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html">ASCII,UTF-8,Unicode</a></li>
<li><a href="en.wikipedia.org/wiki/UTF-16">UTF-8</a></li>
<li><a href="en.wikipedia.org/wiki/Unicode">Unicode</a></li>
</ul>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[Bitwise Operators in javascript]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/tech/bitwise-operators-in-javascript"/>
        <published>2014-02-25T00:00:00+08:00</published>
        <updated>2014-09-24T15:15:32+08:00</updated>
        <id>http://tinple.me/tech/bitwise-operators-in-javascript</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <p>Last two days, I touched frequently with <strong>Bitwise Operators</strong> in <code>Javascript</code>, but I did not figure out what the exactly it is and got 
confused. Hence, after google many related resources, this post here to
try to introduce the Bitwise Operators and some efficient skills using in codes. </p>
<p>In Javascript compiler, Bitwise Operators treat their operands as a sequence
of 32 bits, just zeros or ones. And the maximum and minimum integers are
2147483647 and -2147483648, which represented through a 32bit signed number.</p>

<h2 id="toc_0">Signed 32-bit integers</h2>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">maximum</span> <span class="o">=</span> <span class="mi">2147483647</span><span class="p">;</span>
<span class="nx">maximum</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// 1111111111111111111111111111111</span>
<span class="kd">var</span> <span class="nx">minimum</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2147483648</span><span class="p">;</span>
<span class="nx">minimum</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// -10000000000000000000000000000000</span>
</pre></div>
<p>Notes that the maximum and minimum above in <code>Javascript</code>. Things 
may get strang if you exceed the scope. And if you lack the basis, go to 
<a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#Signed_32-bit_integers">MDN</a> to learn more.</p>

<h2 id="toc_1">Bitwise Operators</h2>
<p>In <code>Javascript</code>, the bitwise operators convert the operands to 32-bit
integers and express it a series of bits. Each bit correspond its bit, and the 
result in constructed bitwise. </p>

<h2 id="toc_2">Bitwise Operands</h2>
<p>As we know, <code>Javascript</code> is a weak typing programming language. Actually, all values can be bitwise operand, for example, a function or a string. However, I guess, <code>javascript</code> will convert the operand to int or long at first internally according to its engine. Some values like function or string  which can not be correctly converted will be 0.</p>
<div class="highlight"><pre><span class="c1">// 88.88 -&gt; 88, 88 | 0 -&gt; 88</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mf">88.88</span> <span class="o">|</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// 88</span>
<span class="c1">// &#39;88.88&#39; -&gt; 88, 88 | 0 -&gt; 88</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;88.88&#39;</span> <span class="o">|</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// 88</span>
<span class="c1">// &#39;sss&#39; -&gt; 0, 0 | 1 -&gt; 1</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;sss&#39;</span> <span class="o">|</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// 1</span>
<span class="c1">// [] -&gt; 0, 0 &amp; -1 -&gt; 0</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">([]</span> <span class="o">&amp;</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// 0</span>
</pre></div>

<h2 id="toc_3">Skills with Bitwise Operators</h2>
<p>Your codes with nice usage of bitwise operators will be much more
efficient. And the situation below you may meet frequently.</p>
<div class="highlight"><pre><span class="c1">// x represents the number under the scope of maximum and minimum</span>
<span class="c1">// x &amp; 0 will return 0</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2147483647</span> <span class="o">&amp;</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// 0</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="o">-</span><span class="mi">2147483648</span> <span class="o">&amp;</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// 0</span>
<span class="c1">// x &amp; -1 will return x</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2147483647</span> <span class="o">&amp;</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// random number x</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="o">-</span><span class="mi">2147483648</span> <span class="o">&amp;</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// random number x</span>
<span class="c1">// x | 0 will return x</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2147483647</span> <span class="o">|</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// random number x</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="o">-</span><span class="mi">2147483648</span> <span class="o">|</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// random number x</span>
<span class="c1">// x | -1 will return -1</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2147483647</span> <span class="o">|</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// -1</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="o">-</span><span class="mi">2147483648</span> <span class="o">|</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// -1</span>

<span class="c1">// Even or Odd, Odd returns 1, Even returns 0</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1111</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">);</span>  <span class="c1">// 1</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">2222</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">);</span>  <span class="c1">// 0</span>

<span class="c1">// ~x will return -(x + 1)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="o">~</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2147483647</span><span class="p">));</span> <span class="c1">// -(x + 1)</span>

<span class="c1">// x ^ 0 will return x, x ^ -1 will return ~x</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2147483647</span> <span class="o">^</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// random number x</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2147483647</span> <span class="o">^</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// ~x</span>

<span class="c1">// x &lt;&lt; y will return x * 2 ^ y (^ is power)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">8</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">);</span> <span class="c1">// 128</span>

<span class="c1">// replace name.indexOf(subName) === 3</span>
<span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;Tinple&#39;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">subName</span> <span class="o">=</span> <span class="s1">&#39;ple&#39;</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="o">~</span><span class="nx">name</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">subName</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// if true</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// if else</span>
<span class="p">}</span>
</pre></div>

<h2 id="toc_4">END</h2>
<p>Using bitwise operator correctly will enhance your code performance.
And the datas in this post are tested in <a href="https://code.google.com/p/v8/">V8</a>, if exist some errors, welcome to point it! </p>

<h3 id="toc_5">References:</h3>

<ul>
<li><a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators">MDN</a></li>
<li><a href="http://www.cnblogs.com/rubylouvre/p/3183616.html">rubylouvre</a></li>
</ul>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[Using jade template engine]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/tech/using-jade-template-engine"/>
        <published>2014-01-22T00:00:00+08:00</published>
        <updated>2014-09-25T18:24:58+08:00</updated>
        <id>http://tinple.me/tech/using-jade-template-engine</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <p>These days I touched a node template engine <code>jade</code>. I loved it at once because its <code>zencoding</code> grammar really attracts me.</p>
<p>Unlike other template engine such as <code>EJS</code> and <code>handlebars</code>, <code>jade</code> has its own elegancy and lots of features. Firstly, you can install it via npm: <code>npm install jade -g</code> or <code>npm install jade</code>. And if you install it globally, try to detect whether the <code>$NODE_PATH</code> includes the location that npm installs globally or not.</p>

<pre><code>@tinple â  ~  which node
/usr/local/bin/node
@tinple â  ~  which npm
/usr/local/bin/npm
@tinple â  ~  echo $NODE_PATH
/usr/local/lib/node_modules</code></pre>
<p>If your <code>$NODE_PATH</code> is null, try to add</p>

<pre><code>export NODE_PATH=/usr/local/lib/node_modules</code></pre>
<p>to your <code>.bash_profile</code> or <code>.zshrc</code>. The path is not absolute, it depends on your node directory.</p>
<p>Jade is a clean, whitespace sensitive syntax for writing html. Just ignore the process that how to turn <code>.jade</code> to <code>.html</code> at begin. Pay attention to its succinct writemode, for example, file <code>demo.jade</code>:</p>

<pre><code>doctype html
html(lang=&quot;en&quot;)
  head
    title= pageTitle
  body
    h1 Hello #{name}
    ul#books
      li.A
        a(href=&quot;#book-a&quot;) Book A
      li.B
        a(href=&quot;#book-b&quot;) Book B
    // comment
    p.
      Tinple and Kristine

    if love
      p A couple
    else
      p Single man</code></pre>
<p>and locals:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">locals</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">pageTitle</span><span class="o">:</span> <span class="s1">&#39;Jade&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Tinple&#39;</span><span class="p">,</span>
    <span class="nx">love</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
<p>Finally it becomes:</p>
<div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>Jade<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;h1&gt;</span>Hello Tinple<span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;books&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;A&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#book-a&quot;</span><span class="nt">&gt;</span>Book A<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;B&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#book-b&quot;</span><span class="nt">&gt;</span>Book B<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
        <span class="c">&lt;!-- comment--&gt;</span>
        <span class="nt">&lt;p&gt;</span>Tinple and Kristine<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;p&gt;</span>A couple<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
<p>And there are many other features <a href="http://naltatis.github.io/jade-syntax-docs/">there</a>, you can learn it by yourself. Next talking about its <code>api</code>, <code>command line</code> and <code>browser-support</code>, yes, jade supports them.</p>

<h2 id="toc_0">Command Line</h2>
<p>When <code>jade</code> is installed, you can run with <code>jade --help</code> to look for the usage. For the above example, you can run with</p>

<pre><code>jade --obj demo.json demo.jade</code></pre>
<p>demo.json:</p>

<pre><code>{
    &quot;pageTitle&quot;: &quot;Jade&quot;,
    &quot;name&quot;: &quot;Tinple&quot;,
    &quot;love&quot;: true
}</code></pre>
<p>Then the std push the data <code>rendered demo.html</code>. And that&#39;s the result. Also, you can use other command options to meet your own requirements.</p>

<h2 id="toc_1">API</h2>
<p>Jade offers <code>api</code> to developers. For full API, see <a href="http://jade-lang.com/api/">there</a>. Below is the simple usage for compile, render string or a file.</p>
<p>runDemo.js:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">jade</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;jade&#39;</span><span class="p">),</span>
    <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">pretty</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">debug</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">compileDebug</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">locals</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">pageTitle</span><span class="o">:</span> <span class="s1">&#39;Jade&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Tinple&#39;</span><span class="p">,</span>
    <span class="nx">love</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">}</span>

<span class="c1">// three ways, just choose one</span>

<span class="c1">// compile</span>
<span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="s1">&#39;demo.jade&#39;</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">fn</span> <span class="o">=</span> <span class="nx">jade</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">html</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">(</span><span class="nx">locals</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// render, pseudocode</span>
<span class="kd">var</span> <span class="nx">html</span> <span class="o">=</span> <span class="nx">jade</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">&#39;string of jade&#39;</span><span class="p">,</span> <span class="nx">merge</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">locals</span><span class="p">));</span>

<span class="c1">// renderFile</span>
<span class="kd">var</span> <span class="nx">html</span> <span class="o">=</span> <span class="nx">jade</span><span class="p">.</span><span class="nx">renderFile</span><span class="p">(</span><span class="s1">&#39;demo.jade&#39;</span><span class="p">,</span> <span class="nx">locals</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
</pre></div>
<p>Choose any way, if just like me, just render the file, then run with <code>node runDemo.js</code>, and you will see the result in your terminal. For more details like the options or other function arguments, try to read the document api.</p>

<h2 id="toc_2">Browsers Support</h2>
<p>The latest version of jade can be download for the browser. And it only supports the very latest browsers. I strongly recommended that you pre-compile your jade templates to JavaScript and then just use the runtime.js library on the client. So how does <code>client-side template</code> works? The whole workflow looks like this:</p>

<ol>
<li><p>Edit <code>.jade</code> file</p></li>
<li><p>Compile template files to JavaScript</p></li>
<li><p>Include runtime.js file</p></li>
</ol>
<p>So edit demo.jade first, we can copy it easily. Then run with</p>

<pre><code>jade --client --no-debug demo.jade</code></pre>
<p>you will get a file <code>demo.js</code> which is JavaScript function that you call with values you want to render your template with and func returns you HTML that you just need to put somewhere on page. Now you just need to include that Jade runtime plus this file that got generated via:</p>
<div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&#39;runtime.js&#39;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&#39;demo.js&#39;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&#39;http://code.jquery.com/jquery-1.10.2.min.js&#39;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">template</span><span class="p">({</span><span class="nx">pageTitle</span><span class="o">:</span> <span class="s1">&#39;Jade&#39;</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Tinple&#39;</span><span class="p">,</span> <span class="nx">love</span><span class="o">:</span> <span class="kc">true</span><span class="p">}));</span>
<span class="nt">&lt;/script&gt;</span>
</pre></div>
<p>File <code>runtime.js</code> is in your jade source code directory.</p>

<h2 id="toc_3">END</h2>
<p><code>jade</code> is nice, not only <code>express</code> uses it but also there are many more developers push the contributions about the jade on <a href="https://github.com/">github</a>, this essay just introduces a little, for more reading, like its feature(mixin, filter, includeâ¦etc), api, implementations or many other, visiting <a href="https://github.com/visionmedia/jade/">jade</a>.</p>

<h3 id="toc_4">References:</h3>

<ul>
<li><a href="http://jade-lang.com/">jade</a></li>
<li><a href="https://github.com/visionmedia/jade">jade-github</a></li>
<li><a href="http://stackoverflow.com/questions/12594541/npm-global-install-cannot-find-module">npm-global-install</a></li>
<li><a href="http://goranperetin.com/post/26701804893/client-side-templating-with-jade-and-node-js#notes">client-side-jade</a></li>
</ul>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[Monthly review for Nov.2013]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/life/monthly-review-for-nov-2013"/>
        <published>2013-11-30T00:00:00+08:00</published>
        <updated>2014-09-24T14:46:00+08:00</updated>
        <id>http://tinple.me/life/monthly-review-for-nov-2013</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <h2 id="toc_0">Tech:</h2>

<ol>
<li><p>æåä¹°äºæ¬ãNode.js å¥é¨ç»å¸ãï¼å¨åå¤æ¯èµé²æçäºå¤§é¨ååå®¹ï¼æåææ·±çæ¯å¦æè¿è¾å­ä¸æ¥è§¦ä¸Node.JSé½ä¸å¥½ææè¯´å¼æ­¥äºãè¿ä¸«ç®ç´å¤ªå¼ºå¤§äºï¼åæ¯è¿ä¸ªæå¿çæ¯èµçäºææ²¡å¤ªå¤å®è·µè¿ï¼å¯åè¦å¥½å¥½å­¦ä¸ã</p></li>
<li><p> åæ­¥æµéäºãJavascriptæ¨¡å¼ãï¼è®²çå¾æ·±å¥ï¼å¤§é¨ååå®¹è·ä¹é¾ä¹¦è®²çå·®ä¸å¤ãä¸è¿ä¹æ·±åä¿¾çã</p></li>
<li><p> åçé¡¹ç®åé¡¾äºæåå­¦çPythonç¬è®°ï¼åæ³èµ·äºå¾å¤ï¼ä¸ä¸ªæä¹æ¯æ­£å¼æ¥è§¦PythonçWebç¼ç¨ãP.S.ï¼PHPï¼Pythonï¼Node.JSå¤©åããæè§å¾èªå·±æ¯ä¸ªç¯å­ã</p></li>
<li><p>è¿ä¸ªæåä¸æ¬¡å¨stackoverflowä¸è¢«åæ§½æé®ä¸æç¡®ï¼é®é¢ä¸æ¸æ°ãä¹æ¯æè¯å°èªå·±ç¨è±æè¡¨è¿°é®é¢çç¼ºé·ï¼æ²éï¼ãä¹æ¯å æ­¤å¼å§ç§¯æåä¸å°<a href="http://stackoverflow.com">stackoverflow</a>ä¸­å»ã</p></li>
<li><p> ä¸æ¬¡æ»é²å¤§èµè®©èªå·±å­¦å°äºè®¸å¤é¶é¶æ£æ£çä¸è¥¿ï¼æ¯å¦æå¡å¨çiptablesï¼Linuxä¸é«æçå·¥ä½æ¹å¼ï¼ä»¥åå¶ä»ç§ç§ãä¹æ¯å°è¯èªå·±åäºå éé¢ï¼æ·±æä½©æé»å®¢ä»¬å¼ºå¤§çæç»´ãP.S.ï¼æ®è¯´æå¡å¨ä¸æ¶è·äºå¥½å¤é©¬ããã</p></li>
</ol>

<h2 id="toc_1">Work:</h2>

<ol>
<li><p> è¿ä¸ªæåèµåå³èµçåæ»¡ä¸¾åï¼åä¿¡<strong>teamwork</strong>çç¡®æ¯ææåæ¬¢ä¸æ¿æä¸ºå¢éç§¯ææå¥è¿å»çãä¸æ¹é¢æ¯èªå·±çè´£ä»»æä¸æå½ï¼ä¸æ¹é¢æ¯å¢éåä½æåå¸¦æ¥çå´å¥ä¸æå°±æï¼ä¹ä¸åæ¯å­¤åå¥æï¼å°¤å¶æ¯ä»»ä½ä¸ä¸ªäººé½æ¯å¢éçæ ¸å¿çæ¶åã</p></li>
<li><p>  å¤§äºä¸ç­çº§è¿æ¯æåä¸¾åäºç§æ¸¸ï¼è½ç¶ç¸æ¯åä¸¤æ¬¡çç¡®ä¸æä¹æ ·ï¼ä½è¿æ¯è½åé½26ä¸ªäººå®å±ä¸æãä¹æ¯ç±æ­¤å¼åå¯¹ä¸ä¸ªéä½çæèï¼å¨åæç«åæºççæåµä¸å¦ä½æè½æå¤§åçä¿ä½åæçç«åå¢ï¼çç¡®æ¯éè¦å¾å¼ºå¤§çç®¡çè½åã</p></li>
<li><p>åä¸æ¬¡åæ°çå¹è®­ï¼ä½ç»æèªå·±ä¸æ¯å¾æ»¡æï¼ä¸æ¥åå¤ååå¿ä¸å¨çï¼äºæ¥çç¡®æ¯èªå·±çè¡¨è¾¾è½åéè¦é»ç¼ãåææ¯çï¼èªå·±äººæ²éäºç¸äºè§£æ¯ä¸ç¹ï¼åå°ç½è®²è¿°è®©ä»æç½åæ¯å¦ä¸ç¹ï¼è¿å¾éè¦ã</p></li>
</ol>

<h2 id="toc_2">Life:</h2>

<ol>
<li><p>è¿ä¸ªæç½å¤©å ä¹å¤§é¨åæ¶é´è±å¨äºæ¯èµä¸ï¼æä¸åè¿æ¯å¾æ©å°å°±åå¯ç¡äºï¼å¯å®¤å·®ç¹å°±æäºåªæ¯ä¸ä¸ªä¼æ¯çå°æ¹ãæ§çãç­¹å¤æ¯èµçæ¥å­åè¿æ¯æºæ»æ¶¦çã</p></li>
<li><p>æ¯èµç»æåçææ«ä¼æ¯äºä¸éµï¼æ³ä»ç»åå³è®°å½ä¸è¿å ä¸ªæçå¿ç¢ï¼å´ä¹åæ¯æµ®èºå°æç»è¿æ¯æ²¡å»åï¼åªæ¯å¤´èééªç°åºè®¸å¤çæ®µãè¿æ²¡æ¾å°æ¥ä¸æ¥å¥æçç¹ï¼åä¹æ åæ åã</p></li>
</ol>

<h2 id="toc_3">End:</h2>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[Salt Cryptography]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/tech/salt"/>
        <published>2013-11-14T00:00:00+08:00</published>
        <updated>2014-09-24T14:51:10+08:00</updated>
        <id>http://tinple.me/tech/salt</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <p>Last three months ago, I made a single page web application to let users register their own team. As the password usually users fill in will make some inconvenience in our
cyber ââsecurity competition, I took a service to send a email which including an automatic generation password. And what I do is adding salt in password to confirm the security.</p>
<p>So what&#39;s called salt?</p>

<blockquote>
<p>In cryptography, a salt is random data that are used as an additional input to a one-way function that hashes a password or passphrase.</p>
</blockquote>
<p>And a new salt is randomly generated for each password. In my apply page, the 
salt and the password are concatenated and processed with a cryptographic hash function, and the resulting output (but not the original password) is sent to users email while the salt and the original password is stored in a database. </p>
<p>Hashing allows for later authentication while defending against compromise of the plaintext password in the event that the database is somehow compromised. And
in this way, the output password will be somehow entirely safe although the original password may be cracked.</p>
<p>All right, it is time to begin. In <code>PHP</code>, the code like this:</p>

<pre><code>$length = 32;
$mode = 0;
switch ($mode) 
{
    case '1':
    $str = '1234567890';
    break;
    case '2':
    $str = 'abcdefghijklmnopqrstuvwxyz';
    break;
    case '3':
    $str = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    break;
    default:
    $str = '1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    break;
}
$pass = '';
$l = strlen($str) - 1;
$num = 0;
for($i = 0;$i &lt; $length;$i++){
    $num = rand(0, $l);
    $a = $str[$num];
    $pass .= $a;
}

$saltLength = 6;
$salt = '';
for ($a = 0; $a &lt; $saltLength; $a++) {
        $salt .= chr(mt_rand(97,122));    
}

echo 'Salt:' . $salt;
echo '&lt;br&gt;';
echo 'Original Password:' . $pass;  
echo '&lt;br&gt;';
// Simply add the salt to the end
echo 'Outping:' . md5(sha1($pass.$salt));</code></pre>
<p>That&#39;s all. And next you can do what you want to do, maybe send the output password to users via email or some other things.</p>
<p>Remember that it is common for a web application to store in a database the hash value of a user&#39;s password. Without a salt, a successful SQL injection attack may yield easily crackable passwords. You can read more on <a href="http://en.wikipedia.org/wiki/Salt_%28cryptography%29">wiki</a> about the beneficial of the salt.</p>
<p>Have fun :D</p>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[HangZhou Marathon]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/life/memory-marathon"/>
        <published>2013-11-03T00:00:00+08:00</published>
        <updated>2014-09-24T14:44:17+08:00</updated>
        <id>http://tinple.me/life/memory-marathon</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <p>ç¬¬ä¸æ¬¡åå é©¬ææ¾ï¼12.8å¬éï¼å¨æ­å·ã</p>
<p>ä½ ä¸ç´å¨è·ï¼ä½æ»æ¯æäººå¨ä½ åé¢ï¼æäººå¨ä½ åé¢ãåªä¸è¿å½ä½ åä¸æ¥çæ¶åï¼ä½ åé¢çäººå°±å¤äºï¼åªæä½ åªæ¯æ¾ç¼èæ­¥ãé©¬ææ¾å¦æ­¤ï¼å¾å¤æ¶åï¼çæ´»ä¹æ¯å¦æ­¤ã</p>
<p>è°¨ä»¥æ­¤çºªå¿µï¼æå¹´åæ¥ã</p>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[ISA Training Part Two]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/tech/isa-training-2"/>
        <published>2013-11-02T00:00:00+08:00</published>
        <updated>2014-09-24T14:50:47+08:00</updated>
        <id>http://tinple.me/tech/isa-training-2</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <p>Everytime when you open your own browser, you just step into a part of <strong>Web</strong> field.And just have a glance of those web pages on the browser.</p>

<ul>
<li><a href="http://weibo.com">weibo</a></li>
<li><a href="http://www.zhihu.com">zhihu</a></li>
<li><a href="http://taobao.com">taobao</a></li>
</ul>
<p>Look at their design, layout and user experience, you may find some different stuffs, and recall what if we visit those websites on a Remote-device?Besides, you see, the nature of them varies, SNS, Social Q &amp; A and C2C.</p>
<p>And nowadays, much more like desktop system web applications appear, like <a href="http://web2.qq.com">webqq</a>, and one more amazing thing, <a href="http://copy.sh/v24/">x86-Simulator</a>.You just can not image it!</p>
<p>However, <strong>no pain, no gain</strong>.Maybe it is really difficult for us to do the stuffs above.But we can hold it step by step, just see those single nice pages, it only requires your imagination.Or maybe you prefer to develop a web game, see the simple tetris game I coded long ago.Yep, you can also finish your own web application game! Even more helpful things like hduhelp.</p>
<p><strong>Only time and determination require!</strong></p>
<p>I will show you some skills you may love to learn, you can learn these skills following the order.</p>

<ul>
<li>HTML &amp; CSS</li>
<li>Javascript</li>
<li>NodeJs</li>
<li>And maybe more other skills..(we will talk about it later)</li>
</ul>
<p>Wait, there are some useful tools I want to show you as well.</p>

<ul>
<li><a href="http://127.0.0.1:8080/#/title">Web Slide controlled remotely</a></li>
<li><a href="http://www.zybuluo.com/mdeditor">online markdown editor</a></li>
<li><a href="http://lab.lepture.com/liquidluck/">liquidluck</a></li>
</ul>
<p>Also some really nice stuffs we usually use, you may touch later if you want to insist on.</p>

<ul>
<li><a href="https://www.github.com">github</a></li>
<li><a href="http://stackoverflow.com">stackoverflow</a></li>
<li><a href="https://www.yinxiang.com/">evernote</a></li>
<li>Git</li>
</ul>
<p>And if you have intersts about those things I refer, just find me directly and I will 
tell you more after.Do not be shy!</p>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[Monthly review for Oct.2013]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/life/monthly-review-for-oct-2013"/>
        <published>2013-11-01T00:00:00+08:00</published>
        <updated>2014-09-24T14:49:21+08:00</updated>
        <id>http://tinple.me/life/monthly-review-for-oct-2013</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <h2 id="toc_0">Tech</h2>
<p>1.å½åºåæ¥åæåå¿çæ¥åå¹³å°çä¸çº¿ï¼å¿ä¹±ä¸­åç§é¡µé¢UIä¼åï¼åè½æµè¯ï¼æ³¨å¥æµè¯ï¼æåè¿æ¯èµ¶å¨10å·ä¸çº¿äºã</p>
<p>2.ä¹æ¯ç®¡ä¸­çª¥è±¹äºä¸çªwebå®å¨ï¼å­¦ä¹ äºæ°æ®åºæé(Privilege)çç²¾ç¡®è®¾ç½®ï¼æ°æ®çåç§è¿æ»¤ï¼æå¡ç«¯æä»¶çæéè®¾ç½®ã</p>
<p>3.ç¬¬ä¸æ¬¡è¯»å®äºè±æå½±å°ççHead Firstç³»åPHP &amp; Mysqlï¼éå¸¸æè¶£ï¼ideaåæ£å¼å­¦ä¹ ï¼è§å¾æ¯è¾éåå¥é¨çå¦æè±æéè¯»è½åå¼ºçè¯ï¼ä½è¿æ¯æå½å·©åºåºç¡ç¥è¯äºã</p>
<p>4.ææ«å¨è¯»Javascriptçä¹é¾ä¹¦ï¼200å¤é¡µç²¾æçä¹¦è®²è¿°çç¼ç¨é£æ ¼ï¼ç¼ç¨å®è·µç­ç­ï¼è½ç¶ç°å¨ç¼ºå°æºä¼å»åä¸å¢éåä½å¼åï¼ä½ç°å¨çä¸ç¹ä¹ä¸æ¾æ©ï¼ç¸åçç¡®å¸®ææ¹è¿äºè®¸å¤codingä¹ æ¯è¿ææç»´ã</p>
<p>5.é´æ­æ§å°è¯»äºä¸äºæ¡æ¶çæºç ï¼æ¯å¦codeigniterï¼CIï¼ï¼jQueryãæè§¦æå¤§çä¸ç¹æ¯å®ä»¬æ´ä½çè®¾è®¡æ¨¡å¼ï¼è¿æç¼ç¨ï¼çç¡®è½å­¦å°è®¸å¤ï¼ä»ä¸­ä¹æ¯è½çå°å®ä»¬ä¹æä»¥ä½ä¸ºæ¡æ¶ç»äºå¼åèçä¾¿æ·ä¹å¤ã</p>
<p>6.è¿ä¸ªæå­¦ä¹ çæ¶åæ´ä¾§éèªå·±ç<strong>è±æéè¯»è½å</strong>äºï¼åHead Firstç³»åçä¹¦æ¶æä¸è®¤è¯çåè¯å¨é½æè®°ä¸æ¥ä¸ä¸ªä¸ªgoogle translateãæ»ä¹ç°å¨è§å¾è±è¯­å¾éè¦ã</p>

<h2 id="toc_1">Work</h2>
<p>1.éç10å·æ¥åå¹³å°çä¸çº¿ï¼ä¹æ¯è·åä¼çå°ä¼ä¼´ä»¬å»æäº3å¤©çæãç´¯å½ç´¯ï¼ä½è¿ç§æ´»å¨æ¶è·è¿æ¯é¢å¤ï¼æ ¡åå®£ä¼ ä¹åºæ¬å°ä½ãPSï¼æå¿µé£ä¸ªé³ç®±ã</p>
<p>2.åä¸äºé¢çº§çåæ°é¡¹ç®ï¼æ··äºå°å­¦å¦¹çéãä¸»è¦æ¯è§å¾è¿ä¸ªé¡¹ç®çideaå¾èµï¼ä½æ»ééæè§åç»­çåå±ç»ä¸ä¼å¦æä»¬ç­åé¢æçé£ä¹å»åï¼æ½å¨è®¸å¤æªç¥çéæ£ï¼çæ­£åå¥½å¾é¾ãä¸è¿è¿æ¯è¦èµä¸ä¸è¿ä¸ªideaã</p>
<p>3.æä»¥åå­çä¹±ä¸å«ç³é¶ç¢çä¸è¥¿é½æ´çäºä¸éï¼å¼å§åçæç§©åºå°æ¶éèµæï¼æ¹ä¾¿ä»¥åéè¦çæ¶åæ¥æ¾ãä¹æ¯æ´çäºå¯å®¤çä¹¦æ¡ååä¼çæ¡å­:D</p>
<p>4.è·å«äººè®¨è®ºé©¬äºå¼ºæ¨æ¥å¾çäºï¼weiboä¸ä¹æ¯çå¾å¾ç«ãæä¸è®ºæ¥å¾è¿ä¸ªäº§åçå¥½åï¼æ»ä¹è§å¾é©¬äºè¿äºå¼ºå¶æ§åçæ¯è¾æåãè®¸å¤æ¶åäº§åæ¯ä¸åäºï¼å®£ä¼ æ¨å¹¿æ¯ä¸åäºï¼è³äºç»æï¼å¾å¾åå³äºä¸¤èä¹åã</p>
<p>5.åå äºä»å¹´10æçé¿éäºå¼åèå¤§ä¼ï¼è½ç¶å°ç¹è®¾å¨åå»çäºæºªå°éï¼å°å¤é½æ¯æ¥å¾ççå­ãä½æ¯é¿éäººçç­æçæ¯ç«æºï¼ä»å¤´å°å°¾é½å¾è´´å¿ãä¹çå°äºä¸äºèªå·±æ³çå°çä¸è¥¿ï¼å¼åäºè®¸å¤å¯¹äº§åçæèãå¬è¯´éè¡çå°ä¼ä¼´è¿è§å°é©¬äºäºã</p>
<p>6.ç®åå°æèäºä¸ä»¥åçåºè·¯ãææ¶ä¸è¯´ï¼ç»§ç»­åªåï¼æ¯ç«ç°å¨è¿è¿è¿ä¸å¤ã</p>

<h2 id="toc_2">Life</h2>
<p>1.å½åºè¿æ¯åäºåå´ï¼å¨é£é·çææ²¡äºåï¼åäºå å¤©å°±åå¿åå»äºãæ¢äºä¸ªç¯å¢å°±ä¸ç¥éè¯¥å»åä»ä¹ï¼ç¸ä¿¡è¿çç¡®æ¯èªå·±çæ´»ä¸ä¸ä¸ªèµ¤è£¸è£¸çå²è®½ã</p>
<p>2.æ¥ååå äºä»å¹´11æä»½çæ­å·å½éé©¬ææ¾ï¼æ¥çç­ç¨12800ãæ³å»ææä¸ï¼æèåå¯ä»¥è¯´æ¯æ³è·å°ä¼ä¼´ä»¬å»ç©ä¸:D</p>
<p>3.è¿ä¸ªæä¸­æ¬åäºæ¯å¤©Must to doçæ¸åï¼ä½è¿æ¯æä¸äºæ²¡è½åæä¸æ¥ï¼æ¯å¦æ¯å¤©ä¸éç¾å§ï¼æ¯å¤©shanbayæå¡ãåæã</p>
<p>4.ææ«ä¸æ¯ç¹å«æ³åå¨çµèåäºï¼æ´å¾åäºæ§çæ¬ä¹¦çï¼æèæ¯å»æèå¶ä»äºã</p>

<h2 id="toc_3">End</h2>
<p>è¿ä¸ªæå¤§å¤äºæ¯å´ç<strong>æ»é²æ¯èµ</strong>è¿æ¡ä¸»çº¿è¿è¡çï¼è·9æè¿æä¸ä¸æ ·çæ¯ï¼è¿ä¸ªæè¿å¿çå¤çä¸äºææï¼ä¸äºçäºã
10æï¼å¤äºç¹å¿ç¢å¸¦æ¥çç´§è¿«èå¥æãPS:æå¤©æ¥åå¹³å°å°±å³é­å¦:D</p>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[Keyword &quot;this&quot; in Javascript]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/tech/keyword-this-in-javascript"/>
        <published>2013-11-01T00:00:00+08:00</published>
        <updated>2014-09-24T14:50:54+08:00</updated>
        <id>http://tinple.me/tech/keyword-this-in-javascript</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <p>I always get tripped up by the <code>this</code> keyword in <code>Javascript</code>.And everytime when I &ldquo;understand&rdquo; it, I still feel confused about
it next time.Hence, this post is here.</p>
<p>In fact, <code>this</code> follows a relatively small set of simple rules.</p>

<h2 id="toc_0">Gloabal context</h2>
<p>In the global execution context, <code>this</code> refers to the <strong>global object</strong>, whether in strict mode or not.</p>
<div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nb">document</span> <span class="o">===</span> <span class="nb">document</span><span class="p">);</span> <span class="c1">// true</span>

<span class="c1">// In browser, the global object is the ```window``` object</span>
<span class="c1">// In Node.js, it&#39;s just called the &quot;global object&quot;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span> <span class="o">===</span> <span class="nb">window</span><span class="p">);</span> <span class="c1">// true</span>

<span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">37</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">a</span><span class="p">);</span> <span class="c1">// 37</span>
</pre></div>

<h2 id="toc_1">Function context</h2>
<p>A function&#39;s <code>this</code> keyword may behaves a little differently in <code>Javascript</code> compared to other languages.
And there are some cases where the value of <code>this</code> changes.</p>

<h3 id="toc_2">Method invocations</h3>
<p>When a function is called as a method of an object, its <code>this</code> refers to the object the method is called on.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">creditCard</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">money</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">increment</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">money</span> <span class="o">+=</span> <span class="mi">8888</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// dot notation</span>
<span class="nx">creditCard</span><span class="p">.</span><span class="nx">increment</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">creditCard</span><span class="p">.</span><span class="nx">money</span><span class="p">);</span>  <span class="c1">// 8888</span>

<span class="c1">// bracket notation</span>
<span class="nx">creditCard</span><span class="p">[</span><span class="s1">&#39;increment&#39;</span><span class="p">]();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">creditCard</span><span class="p">.</span><span class="nx">money</span><span class="p">);</span> <span class="c1">// 17776</span>

<span class="cm">/*****call the same function directly*****/</span>
<span class="kd">var</span> <span class="nx">moreMoney</span> <span class="o">=</span> <span class="nx">creditCard</span><span class="p">.</span><span class="nx">increment</span><span class="p">;</span>
<span class="nx">moreMoney</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">creditCard</span><span class="p">.</span><span class="nx">money</span><span class="p">);</span> <span class="c1">// 17776</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">money</span><span class="p">);</span> <span class="c1">// NAN</span>
</pre></div>
<p>Note that when we call the same function directly, <code>this</code> refers to the global object instead of <code>creditCard</code> object.</p>
<div class="highlight"><pre><span class="c1">// window.money += 8888, but window.money is undefined </span>
<span class="k">this</span><span class="p">.</span><span class="nx">money</span> <span class="o">+=</span> <span class="mi">8888</span><span class="p">;</span>
</pre></div>
<p>And what&#39;s more, this rule also works on the prototype chain.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">moneyUp</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">increment</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">money</span> <span class="o">+=</span> <span class="mi">8888</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">creditCard</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">moneyUp</span><span class="p">);</span>
<span class="nx">creditCard</span><span class="p">.</span><span class="nx">money</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">creditCard</span><span class="p">.</span><span class="nx">increment</span><span class="p">());</span>
</pre></div>

<h3 id="toc_3">The new operator</h3>
<p>And when a function is used as a <strong>constructor</strong>(with the <code>new</code> keyword), its <code>this</code> is set to the newly created object.</p>
<div class="highlight"><pre><span class="kd">function</span> <span class="nx">CreditCard</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">money</span> <span class="o">=</span> <span class="mi">8888</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">savedMoney</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CreditCard</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">savedMoney</span><span class="p">.</span><span class="nx">money</span><span class="p">);</span> <span class="c1">// 8888</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">money</span><span class="p">);</span>  <span class="c1">// ReferenceError</span>

<span class="c1">// And without new, </span>
<span class="c1">// this refers to the global object</span>
<span class="kd">var</span> <span class="nx">savedMoney_</span> <span class="o">=</span> <span class="nx">CreditCard</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">savedMoney_</span><span class="p">.</span><span class="nx">money</span><span class="p">);</span> <span class="c1">// undefined</span>
</pre></div>

<h3 id="toc_4">Call and apply</h3>
<p>All Javascript functions have two methods, <code>call</code> and <code>apply</code>, which let you call
functions and explicitly set the value of <code>this</code>.</p>
<div class="highlight"><pre><span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">b</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">+</span> <span class="nx">d</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span><span class="mi">3</span><span class="p">};</span>

<span class="c1">//call</span>
<span class="c1">//The first parameter is the object to use as this</span>
<span class="c1">//and the second is an (optional) array of arguments </span>
<span class="nx">add</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span> <span class="c1">// 1+3+5+7=16</span>

<span class="c1">//apply</span>
<span class="c1">//The first parameter is the object to use as this</span>
<span class="c1">//and the second should be passed individually </span>
<span class="nx">add</span><span class="p">.</span><span class="nx">appy</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">]);</span> <span class="c1">// 1+3+10+20=34</span>
</pre></div>
<p>And in this part, <code>this</code> is set to the first argument passed to <code>call</code> or <code>apply</code> inside function code when that function is called with either <code>call</code> or <code>apply</code>.</p>

<h3 id="toc_5">Bound functions</h3>
<p>ECMAScript 5 introduced <code>Function.prototype.bind</code> .Calling <code>f.bind(someObejct)</code> creates a new function with the same body and scope as f, and has its <code>this</code> keyword set to the provided value, regardless of how the function is being used.</p>
<div class="highlight"><pre><span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">nickname</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// a new function has its own this keyword</span>
<span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">f</span><span class="p">.</span><span class="nx">bind</span><span class="p">({</span><span class="nx">nickname</span><span class="o">:</span> <span class="s2">&quot;Tinple&quot;</span><span class="p">});</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">g</span><span class="p">());</span> <span class="c1">// Tinple</span>

<span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="nx">nickname</span><span class="o">:</span><span class="s2">&quot;Kristine&quot;</span><span class="p">,</span> <span class="nx">f</span><span class="o">:</span><span class="nx">f</span><span class="p">,</span> <span class="nx">g</span><span class="o">:</span><span class="nx">g</span><span class="p">};</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">f</span><span class="p">(),</span> <span class="nx">o</span><span class="p">.</span><span class="nx">g</span><span class="p">());</span> <span class="c1">// Kristine, Tinple</span>
</pre></div>

<h2 id="toc_6">Other conditions</h2>

<h3 id="toc_7">DOM event handler</h3>
<p>When a function is used as an 
event handler, its this is set to the element the event fired from (some browsers do not follow this convention for listeners added dynamically with methods other than addEventListener).</p>

<h3 id="toc_8">In-line event handler</h3>
<p>When code is called from an 
in-line handler, its <code>this</code> is 
set to the DOM element on which the listener is placed.</p>
<div class="highlight"><pre><span class="c">&lt;!-- button --&gt;</span>
<span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">&quot;alert(this.tagName.toLowerCase());&quot;</span><span class="nt">&gt;</span>Show this<span class="nt">&lt;/button&gt;</span>
<span class="c">&lt;!-- the global window object--&gt;</span>
<span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">&quot;alert((function(){return this}}()));&quot;</span><span class="nt">&gt;</span>Show inner this<span class="nt">&lt;/button&gt;</span>
</pre></div>
<p>Note that only the outer code has its <code>this</code> set this way.</p>

<h3 id="toc_9">Eval breaks all the rules</h3>
<p>As the code evaluated inside <code>eval</code> is its own type of 
executable code, the rules of determining what <code>this</code> refers to inside of eval code are a little more complex.</p>
<div class="highlight"><pre><span class="c1">//depends on browser</span>
<span class="nb">eval</span><span class="p">.</span><span class="nx">call</span><span class="p">({</span><span class="nx">val</span><span class="o">:</span> <span class="mi">0</span><span class="p">},</span> <span class="s2">&quot;console.log(this.val)&quot;</span><span class="p">);</span>
</pre></div>
<p>And you can read more about <code>eval</code> <a href="http://perfectionkills.com/global-eval-what-are-the-options/">here</a>.</p>
<p><strong>References:</strong></p>

<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/JavaScript/Reference/Operators/this">MDN</a></li>
<li><a href="http://www.ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-262,%203rd%20edition,%20December%201999.pdf">ECMA</a></li>
</ul>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[Maintainable Javascript Part Two]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/tech/maintainable-javascript-2"/>
        <published>2013-10-30T00:00:00+08:00</published>
        <updated>2014-09-24T14:51:06+08:00</updated>
        <id>http://tinple.me/tech/maintainable-javascript-2</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <p><strong>Maintainable Javascript continue</strong>, you can read <a href="http://tinple.me/tech/maintainable-javascript-1">Part One</a> to review.</p>

<h3 id="toc_0">Avoid Globals</h3>
<p>Global variables are really special in <code>Javascript</code>, see examples below.</p>

<script>
// A "mistake" semicolon creates a global variable
function doSomething() {
    var count = 10; 
        title = "Maintainable Javascript"; 
}

// This global variable affects window.name
function doAnotherThing() {
    var count = 10;
        name = "Tinple"; 
}
</script>
<div class="highlight"><pre><span class="c1">// A &quot;mistake&quot; semicolon creates a global variable</span>
<span class="kd">function</span> <span class="nx">doSomething</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> 
        <span class="nx">title</span> <span class="o">=</span> <span class="s2">&quot;Maintainable Javascript&quot;</span><span class="p">;</span> 
<span class="p">}</span>

<span class="c1">// This global variable affects window.name</span>
<span class="kd">function</span> <span class="nx">doAnotherThing</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
        <span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;Tinple&quot;</span><span class="p">;</span> 
<span class="p">}</span>
</pre></div>
<p>And the author recommends that anything that can be defined within the function should be written as such; any data that comes from outside the function should be passed in as an argument. Besides, it is better to use <strong>The One-Global Approach</strong>, like some popular <code>JavaScript libraries</code>.</p>
<div class="highlight"><pre><span class="c1">// only one gloabal object</span>
<span class="kd">var</span> <span class="nx">MaintainableJS</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">MaintainableJS</span><span class="p">.</span><span class="nx">Book</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">title</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">title</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">page</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">MaintainableJS</span><span class="p">.</span><span class="nx">Book</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">turnPage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">direction</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">page</span> <span class="o">+=</span> <span class="nx">direction</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">MaintainableJS</span><span class="p">.</span><span class="nx">Chapter1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MaintainableJS</span><span class="p">.</span><span class="nx">Book</span><span class="p">(</span><span class="s2">&quot;part-one&quot;</span><span class="p">);</span>
<span class="nx">MaintainableJS</span><span class="p">.</span><span class="nx">Chapter2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MaintainableJS</span><span class="p">.</span><span class="nx">Book</span><span class="p">(</span><span class="s2">&quot;part-two&quot;</span><span class="p">);</span>
<span class="nx">MaintainableJS</span><span class="p">.</span><span class="nx">Chapter3</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MaintainableJS</span><span class="p">.</span><span class="nx">Book</span><span class="p">(</span><span class="s2">&quot;part-three&quot;</span><span class="p">);</span>
</pre></div>

<h3 id="toc_1">Namespace</h3>
<p>And you can easily create your own namespaces in <code>JavaScript</code> with objects.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">Books</span> <span class="o">=</span> <span class="p">{};</span>

<span class="c1">// namespace for this book</span>
<span class="nx">Books</span><span class="p">.</span><span class="nx">MaintainableJavascript</span> <span class="o">=</span> <span class="p">{};</span>

<span class="c1">//namespace for another book</span>
<span class="nx">Books</span><span class="p">.</span><span class="nx">HighPerformanceJavascript</span> <span class="o">=</span> <span class="p">{};</span>
</pre></div>
<p>There are also times when each file is simply adding to a namespace.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">YourGlobal</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">namespace</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ns</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">parts</span> <span class="o">=</span> <span class="nx">ns</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
            <span class="nx">i</span><span class="p">,</span> <span class="nx">len</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">object</span><span class="p">[</span><span class="nx">parts</span><span class="p">[</span><span class="nx">i</span><span class="p">]])</span> <span class="p">{</span>
                <span class="nx">object</span><span class="p">[</span><span class="nx">parts</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{};</span>
            <span class="p">}</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">parts</span><span class="p">[</span><span class="nx">i</span><span class="p">]];</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">object</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm">* Creates both YourGlobal.Books and YourGlobal.Books.MaintainableJavaScript.</span>
<span class="cm">* Neither exists before hand, so each is created from scratch.</span>
<span class="cm">*/</span>
<span class="nx">YourGlobal</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s2">&quot;Books.MaintainableJavaScript&quot;</span><span class="p">);</span>

<span class="c1">// you can now start using the namespace</span>
<span class="nx">YourGlobal</span><span class="p">.</span><span class="nx">Books</span><span class="p">.</span><span class="nx">MaintainableJavaScript</span><span class="p">.</span><span class="nx">author</span> <span class="o">=</span> <span class="s2">&quot;Nicholas C. Zakas&quot;</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm">* Leaves YourGlobal.Books alone and adds HighPerformanceJavaScript to it.</span>
<span class="cm">* This leaves YourGlobal.Books.MaintainableJavaScript intact.</span>
<span class="cm">*/</span>
<span class="nx">YourGlobal</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s2">&quot;Books.HighPerformanceJavaScript&quot;</span><span class="p">);</span>

<span class="c1">// still a valid reference</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">YourGlobal</span><span class="p">.</span><span class="nx">Books</span><span class="p">.</span><span class="nx">MaintainableJavaScript</span><span class="p">.</span><span class="nx">author</span><span class="p">);</span>

<span class="c1">// You can also start adding new properties right off the method call</span>
<span class="nx">YourGlobal</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s2">&quot;Books&quot;</span><span class="p">).</span><span class="nx">ANewBook</span> <span class="o">=</span> <span class="p">{};</span>
</pre></div>

<h3 id="toc_2">Modules</h3>
<p>Sorry, but I will try to understand it entirely later.You can read some documents
at will.</p>

<blockquote>
<p><a href="http://seajs.org/docs/">Sea.js</a></p>
<p><a href="http://requirejs.org/">Require.js</a></p>
</blockquote>

<h3 id="toc_3">Event Handling</h3>
<p>Event handling is an important part of any JavaScript application. All JavaScript is tied to the UI through events.And the following rules may improve your code.</p>
<div class="highlight"><pre><span class="c1">// Rule #1</span>
<span class="c1">// It is better to separate application logic</span>
<span class="kd">var</span> <span class="nx">MyApplication</span> <span class="o">=</span> <span class="p">{</span>

    <span class="nx">handleClick</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">showPopup</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
    <span class="p">},</span>

    <span class="nx">showPopup</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">popup</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;popup&quot;</span><span class="p">);</span>
        <span class="nx">popup</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
        <span class="nx">popup</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
        <span class="nx">popup</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">&quot;reveal&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">addListener</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">MyApplication</span><span class="p">.</span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Rule #2</span>
<span class="c1">// Do not Pass the Event Object Around</span>
<span class="kd">var</span> <span class="nx">MyApplication</span> <span class="o">=</span> <span class="p">{</span>

    <span class="nx">handleClick</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>

        <span class="c1">// assume DOM Level 2 events support</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>

        <span class="c1">// pass to application logic</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">showPopup</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientY</span><span class="p">);</span>
    <span class="p">},</span>

    <span class="nx">showPopup</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">popup</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;popup&quot;</span><span class="p">);</span>
        <span class="nx">popup</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
        <span class="nx">popup</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
        <span class="nx">popup</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">&quot;reveal&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">addListener</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">MyApplication</span><span class="p">.</span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<h3 id="toc_4">Avoid Null Comparisons</h3>

<ul>
<li>Use <code>typeof</code> operator to detect <strong>Primitive Values (string, number, boolean, undefined)</strong></li>
<li>Use <code>instanceof</code> operator to detect <strong>Reference Values (Obejct, Array, Date, Error, RegExp)</strong></li>
<li>Use <code>typeof</code> operator to detect <strong>Functions (also works across frames
but not IE8)</strong></li>
<li>Use <code>in</code> operator to detect <strong>the presence of a property (hasOwnProperty() to make sure of an instance property)</strong></li>
<li>Detect <strong>Array</strong></li>
</ul>
<div class="highlight"><pre><span class="kd">function</span> <span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;[object Array]&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p><strong>Maintainable Javascript Part Two over</strong>.</p>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[Maintainable Javascript Part One]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/tech/maintainable-javascript-1"/>
        <published>2013-10-28T00:00:00+08:00</published>
        <updated>2014-09-24T14:51:02+08:00</updated>
        <id>http://tinple.me/tech/maintainable-javascript-1</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <p>Last two days I just have finished the book ãMaintainable Javascriptã.</p>

<blockquote>
<p>When you come to work, you&#39;re not writing code for you, you&#39;re
writing code for those who come after you.</p>
</blockquote>
<p>I really like the words above the author Nicholas C. Zakas said, and this book really
improves someone who may not work in professional team like me, or someone who wants to organize a team.The
following is just my note that I regard it useful, but it may not really meets you.</p>

<h2 id="toc_0">Part one ï¼Style Guidelines</h2>

<blockquote>
<p>Programs are meant to be read by humans and only incidentally for computers to execute.</p>
</blockquote>

<h4 id="toc_1">null</h4>
<p><strong><code>null</code></strong> should be used in just a few cases:</p>

<ol>
<li>To initialize a variable that may later be assigned an object value</li>
<li>To compare against an initialized variable that may or may not have an object value.</li>
<li>To pass into a function where an object is expected</li>
<li>To return from a function where an object is expected</li>
</ol>
<p>And the best way to think about null is as a placeholder for an object. </p>

<h4 id="toc_2">for-in loop</h4>
<p>As <code>for-in</code> loop returns not only instance properties of an object but also all
properties it inherits through the prototype.Hence, it is best to filter the <code>for-in</code> loop to only instance properties by using <code>hasOwnProperty()</code>.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">prop</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">prop</span> <span class="k">in</span> <span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">prop</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Property name is&quot;</span> <span class="o">+</span> <span class="nx">prop</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Property value is&quot;</span> <span class="o">+</span> <span class="nx">object</span><span class="p">[</span><span class="nx">prop</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>And remember do not use <code>for-in</code> to iterate over members of an array.</p>

<h4 id="toc_3">Equality</h4>
<p>One of the main areas in which <strong>type coercion</strong> occurs is with the use of equality operators, <code>==</code> and <code>!=</code>. </p>
<p>And <strong>other points</strong> in this part I just easily skip.</p>

<h2 id="toc_4">Part two ï¼Programming Practices</h2>

<h3 id="toc_5">Loose Coupling of UI Layers</h3>
<p>Loose coupling is achieved when you are able to make changes to a single component without making changes to other components. And it is achieved by limiting each component&#39;s knowledge of the larger system.</p>

<ul>
<li>Keep JavaScript Out of CSS (css expression denied)</li>
<li>Keep CSS Out of JavaScript</li>
<li><strong>Keep JavaScript Out of HTML</strong></li>
</ul>
<div class="highlight"><pre>// ugly code
<span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">&quot;doSomething()&quot;</span> <span class="na">id=</span><span class="s">&quot;action-btn&quot;</span><span class="nt">&gt;</span>Click Me<span class="nt">&lt;/button&gt;</span>
</pre></div>
<div class="highlight"><pre><span class="c1">// use JavaScript methods for adding event handlers</span>
<span class="kd">function</span> <span class="nx">addListener</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handler</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">target</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">target</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span><span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handler</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">target</span><span class="p">[</span><span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">]</span> <span class="o">=</span> <span class="nx">handler</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">btn</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;action-btn&quot;</span><span class="p">);</span>
<span class="nx">addListener</span><span class="p">(</span><span class="nx">btn</span><span class="p">,</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="nx">doSomething</span><span class="p">);</span>
</pre></div>

<ul>
<li><strong>Keep HTML Out of JavaScript</strong></li>
</ul>
<div class="highlight"><pre><span class="c1">// Bad </span>
<span class="kd">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;my-div&quot;</span><span class="p">);</span>
<span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;h3&gt;Error&lt;/h3&gt;&lt;p&gt;Invalid e-mail address.&lt;/p&gt;&quot;</span><span class="p">;</span>
</pre></div>
<p>Embedding HTML strings inside your JavaScript is a bad practice for a number of
reasons.And there are several ways to accomplish this in a loosely coupled manner.</p>

<h4 id="toc_6">1.Load from the Server</h4>
<p>keep the templates remote and use an XMLHttpRequest object to retrieve
additional markup, it is much more convenient for single-page applications than 
multiple-page applications. But when using this method, you should pay attention 
to <code>XSS</code> attack, and it requires lots of transcode and decode strategy between client and server to defense.</p>
<div class="highlight"><pre><span class="kd">function</span> <span class="nx">loadDialog</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">oncomplete</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
    <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;/js/dialog/&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

    <span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="mi">4</span> <span class="o">&amp;&amp;</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>

            <span class="kd">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;dlg-holder&quot;</span><span class="p">);</span>
            <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">;</span>
            <span class="nx">oncomplete</span><span class="p">();</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// wrong handler</span>
        <span class="p">}</span>
    <span class="p">};</span>

    <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<h4 id="toc_7">2.Simple Client-Side Templates</h4>
<p>Client-side Templates are markup pieces with slots that must be filled by JavaScript in order to be complete.For example:</p>
<div class="highlight"><pre><span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;%s&quot;</span><span class="nt">&gt;</span>%s<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
</pre></div>
<p>And you can make templates accessible to Javascript by embedding them directly
in the HTML page.Maybe a function will make it.</p>
<div class="highlight"><pre><span class="kd">function</span> <span class="nx">sprintf</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/%s/g</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">?</span> <span class="nx">args</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">]</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="c1">// usage</span>
<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">sprintf</span><span class="p">(</span><span class="nx">templateText</span><span class="p">,</span> <span class="s2">&quot;/item/4&quot;</span><span class="p">,</span> <span class="s2">&quot;Fourth item&quot;</span><span class="p">);</span>
</pre></div>
<p>It is ok to include the templates as an comment or embed templates into an HTML
page by using a <code>&lt;script&gt;</code> element with a custom <code>type</code> property.</p>
<div class="highlight"><pre>// comment
<span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;mylist&quot;</span><span class="nt">&gt;</span><span class="c">&lt;!--&lt;li id=&quot;item%s&quot;&gt;&lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;&lt;/li&gt;--&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>

<pre><code>/* script element, remember to strip any leading white space 
that may be in the template, because template text is  
on the line after the opening script tag */
&lt;script type=&quot;text/x-my-template&quot; id=&quot;list-item&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;&lt;/li&gt;
&lt;/script&gt;</code></pre>

<h4 id="toc_8">3.Complex Client-Side Templates</h4>
<p>Complex Client-Side Templates may do some escaping, well, you can use some robust templates like <a href="http://handlebarsjs.com/">Handlebars</a>, which is a complete client-side templating system designed to work with JavaScript in the browser.</p>
<p><strong>Maintainable Javascript Part One over</strong>.</p>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[Securing web application Part One]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/tech/securing-web-application-1"/>
        <published>2013-10-10T00:00:00+08:00</published>
        <updated>2014-09-24T15:17:24+08:00</updated>
        <id>http://tinple.me/tech/securing-web-application-1</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <p>It would be a hard decision for me to write down this essay.But I still want to
express some security opinion and give the solution for some attack that I used to do.</p>

<h2 id="toc_0">SQL Injection</h2>
<p>When I learned <code>PHP</code> last term, I just only finished a simple web application and ensured the ability it should have.But it is really dangerous leaving web application without any other defences.You see, something with SQL could be attacked by some sneaky tricks.</p>
<p>Considering a situation that I make a platform for users to join a competition, 
and at first they should apply but the <strong>privilege field</strong> in database that for 
users logining in platform is 0(same as false), I may change it to
1 few days later.</p>
<p>And if I design my table structure like this(I use mysql):</p>
<div class="highlight"><pre><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">EXAMPLE</span> <span class="p">(</span>
    <span class="n">ID</span>   <span class="nb">INTEGER</span> <span class="n">UNSIGNED</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
    <span class="n">USERNAME</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">PASSWORD</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">PRIVILEGE</span> <span class="n">TINYINT</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">,</span>

    <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">ID</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
<p>And my form page receives datas which are posted and immediately inserted into database without any filter: </p>
<div class="highlight"><pre><span class="x">$username = $_POST[&#39;username&#39;];</span>
<span class="x">$pwd = $_POST[&#39;password&#39;];</span>

<span class="x">//..some database connection codes</span>
<span class="x">$query = &quot;INSERT INTO EXAMPLE VALUES(&#39;$username&#39;, &#39;$pwd&#39;, 0)&quot;;</span>
<span class="x">//$dbc is a mysql connection return</span>
<span class="x">mysqli_query($dbc, $query);</span>

<span class="x">//any other codes</span>
</pre></div>
<p>If someone put <code>passwor&#39;, 1) --</code> into password field, the sql query will be 
<code>INSERT INTO EXAMPLE VALUES(&#39;someone&#39;, &#39;password&#39;, 1) -- &#39;, 0)</code>, and the double-hyphen comment causes the rest of the line of SQL code to be ignored!Hence,
his privilege will be 1.And this attack is known as an <strong>SQL Injection</strong>.</p>
<p>And something we could do to defense it is filter any datas that user can write into
database, an example defence:</p>
<div class="highlight"><pre><span class="x">$username = mysqli_real_escape($dbc, trim($_POST[&#39;username&#39;]));</span>
<span class="x">$pwd = mysqli_real_escape($dbc, trim($_POST[&#39;password&#39;]));</span>
</pre></div>
<p>Sure, you can alse use <strong>regular expression</strong> to filter it.Besides, the privilege field could be designed to <code>DEFAULT 0</code> so that it would not be inserted any more, or just revoke the <code>INSERT privilege(field)</code> privilege in mysql for users, like we will talk below. </p>

<h2 id="toc_1">Mysql privileges</h2>
<p>Like some other man, I used <code>Mysql</code> as my database to store datas in my all project.
But I am not professional, just use it to combine with <code>PHP</code>.
I didn&#39;t care the mysql privileges when I executed a sql statement, just let it runned as I expected.</p>
<p>And now I realized the <strong>big potential</strong> problem that I have made. I didn&#39;t set privileges accurately for mysql users.</p>
<p>Above example again.This time we create another mysql user named user_example at begin.And we could set this mysql user only few privileges when users apply:</p>
<div class="highlight"><pre><span class="o">//</span><span class="p">[...]</span> <span class="n">should</span> <span class="n">be</span> <span class="n">replaced</span> <span class="n">depends</span> <span class="k">on</span> <span class="n">you</span>
<span class="k">GRANT</span> <span class="k">INSERT</span><span class="p">(</span><span class="o">`</span><span class="n">USERNAME</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">PASSWORD</span><span class="o">`</span><span class="p">)</span> <span class="k">ON</span> <span class="o">`</span><span class="p">[</span><span class="k">database</span><span class="p">]</span><span class="o">`</span><span class="p">.</span><span class="o">`</span><span class="n">EXAMPLE</span><span class="o">`</span> 
<span class="k">TO</span> <span class="o">`</span><span class="n">user_example</span><span class="o">`@</span><span class="p">[</span><span class="n">ip_address</span><span class="p">];</span>
</pre></div>
<p>Like this, users will not be able to do something like INSERT privilege field into database.And if you have a backstage to manage platform, you may also set the second mysql user privilege accurately, just use two mysql users and <strong>ensure their respective privilege</strong> in your web application, accurating privileges to your every table field.And it means a lot about security to your web application.</p>

<h2 id="toc_2">CSRF &amp;&amp; Token defense</h2>
<p><strong>Cross-site request forgery</strong>, which exploits the trust that a site has in user\&#39;s
browser.</p>

<blockquote>
<p>The attack works by including a link or script in a page that accesses a site to which the user is known (or is supposed) to have been authenticated.</p>
</blockquote>
<p>I am sorry that I know little about it.But you could learn it more on <a href="http://en.wikipedia.org/wiki/Cross-site_request_forgery">wiki</a>.Have fun!</p>

<h2 id="toc_3">End</h2>
<p>Nothing is ever truly 100% secure, so we are always talking about degrees of security.The above three points may let you realize the security about your web
application, and just try to make preventions to protect it!</p>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[Monthly review for Sep.2013]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/life/monthly-review-for-sep-2013"/>
        <published>2013-10-01T00:00:00+08:00</published>
        <updated>2014-09-24T14:49:19+08:00</updated>
        <id>http://tinple.me/life/monthly-review-for-sep-2013</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <p>åº:åæ®µæ¶é´è·äººèèµ·åèªç«¥å¹´çä¸äºæäºï¼é£ä¸ªèä¼è®¡æ»æ»ä¸ç»è¯´å¾å¾å¼å¿ï¼å¯æå´æç ´èç®ä¹åªè½éªè¿ä¸äºçæ®µãææåç°èªå·±çè®°å¿æ¯é£ä¹ç­æèåä¸å¯æç¼ºãå æ­¤ææ³ä»ç°å¨è¿ä¸ªæ¼æçå¹´çºªå¼å§ï¼æ¯æè¿è¡ä¸æ¬¡æ»ç»ï¼æå½éæ¥ã</p>

<h2 id="toc_0">Tech:</h2>
<p>1.æåå¨writingä¸åäºç¬¬ä¸ç¯åå®¢ï¼ä¹æèªä¸å³å¿åæåä¸å»ï¼åªæé½æ¯äºä¹±ä¸å«ç³çä¸è¥¿ï¼ç¶åèªå·±æ­äºä¸ªliquidluckï¼é£æ ¼çæ¯åæ¬¢ï¼å¹²å¹²ååã</p>
<p>2.ä¹æ¯æåå¨Githubä¸æç®¡äºèªå·±çéæåå®¢ï¼ç¶åå¨godaddyä¸è±äº8åä¹°äºä¸ªæ§.meååï¼ä»æ­¤ç±ä¸markdownçåä½é£æ ¼ã</p>
<p>3.åæ­¥å­¦ä¹ äºgitï¼æåå°çæ¬æ§å¶ç®¡çæºå¶çå¼ºå¤§ï¼ä»¥åä¼å¸¸è·å®æäº¤éã</p>
<p>4.ç¢çè¬ä¼åäºæ»é²å¤§èµå¹³å°ï¼ä½å°åç»­è®²çè®¸å¤ç¸å³å®å¨æ§è´¨çä¸è¥¿é½æ·±åå¯åã</p>
<p>5.æwindowsæ ¼äºï¼è£äºä¸ªåºæ¥ç¨çubuntuï¼è¯ç¨äºå å¤©æè§ä¸éï¼åªæ¯å°ç°å¨ä¹è¿æ²¡è½è§£å³æ¡é¢ç¯å¢å´©æºåæ­»çæåµï¼èªå¸¦æ¡é¢åawesomeé½å´©è¿:(</p>
<p>5.ç¨äºå å¤©Ubuntuï¼çç»äºè®¸å¤linuxä¸çå½ä»¤ï¼æè§åè¿ä¸å¹´å·®ä¸å¤åºè¯¥å¥é¨äºã</p>
<p>6.åé²å¹³å°ç¨çæ¯nginxï¼ç¶åé¨ç½²çæ¶åæå¡å¨æ¹é¢åäºè®¸å¤nginxçç¥è¯ï¼åæ­¥å¯¹nginxéç½®æä»¶æäºè¾å¤§çäºè§£ï¼ä»¥åè¦è¡¥æå¡ç«¯çç¥è¯ã</p>
<p>7.å¨nodeä¸æåå®ç°ææºè¿ç¨æ§å¶èªå·±åçå¹»ç¯çï¼èèæ¥è§¦nodejsã</p>

<h2 id="toc_1">Work:</h2>
<p>1.è·åä¼çå°ä¼ä¼´ä»¬ä¸èµ·åå¤å¼å­¦å­£çå·¥ä½ï¼ä»å­¦é¢çç¸è¬çå®£è®²ä¼å°æ¥è¿300äººçé¢è¯ï¼åå°ç¬¬ä¸æ¬¡æ°çå¹è®­ï¼é¢å¯¹æ¯å¹´é½è½æ1#128æ¤ççæ°çä»¬ï¼èªå·±ä¹æ¯ç¬¬ä¸æ¬¡ç«å¨åé¢ä»¥å­¦é¿çèº«ä»½åæ°çä»¬ä¼ è¾ææ³ã</p>
<p>2.ä¹æ¯é£å¤©çæ°çå¹è®­ï¼å¬å°æ°å¥çè®²è¯ï¼æ·±åæè§¦ï¼åªè½éçº¦è®°èµ·å¶ä¸­ä¸¤ç¹ã</p>

<blockquote>
<p>å¤§ä¸æ¯å³å®å¤§å­¦åå¹´æéè¦çä¸å¹´ã</p>
<p>ä»åºæ»æ¯ä¼æåæ¥çã</p>
</blockquote>
<p>3.ç¬¬ä¸æ¬¡å¬åå¥è®²å¼æºï¼ä¹æ¯ç¬¬ä¸æ¬¡å¯¹å¼æºæäºæ´è¿ä¸æ­¥çè®¤è¯ã</p>

<blockquote>
<p>åå¼æºçå¤§å¤æ¯ä»¥åä»å¼æºä¸­åçï¼ç¶åå³å®èªå·±ä¹å¼æºè®©å«äººåçã</p>
<p>å¼æºä¹æ¯ä¸ç§åå±ï¼éè¿å¼æºä»£ç è½ä¸æ­æ¹è¿ä¸æ­è¿æ­¥ã</p>
<p>å¼æºåªæå­¦çåå¤§å¬å¸è½åï¼å ä¸ºæ²¡æç»è´¹ååã</p>
</blockquote>
<p>4.ç°å¨åç åå¤§å¤é½æ¯ç¬èªä¸äººå»åï¼è¿æ²¡æ¥è§¦è¿å¤äººåä½ãä½æ¯ä¸æ¦å¤äººåä½èµ·æ¥ï¼èªå·±æå¿çæå¤§çé®é¢å°±æ¯å¨å¼åæå¥åï¼æ²¡æäººæéæ±æç¡®ï¼æ²¡äººå¯¹éæ±è¿è¡çæ¬åç¦»ï¼æ²¡æåççåå·¥ï¼ç»æå°æåé½æ¯è¾¹åè¾¹æ³è¾¹æ å¤´ï¼ä¸å¤´ä¹±ã</p>
<p>5.è½ç¶æ²¡æå¨ä¸ä¸ªææ¯ä¹å¤çç¤¾å¢åè¿ï¼æ¾ç»ä¹æ¯ä¸é¢å°±è¢«é¢åå»ºæå·ãä½æ¯è¯´èµ·ä¸äºç»ç»ä¸çäºï¼ççåä¸ªç¤¾å¢å¨å¼å­¦åå¿éå¿å¤ï¼èªå·±ä¹æå ç¹çæ³ã</p>

<blockquote>
<p>ä¸ä»½å·¥ä½æéè¦çèµæºä¸å·¥ä½æ¬èº«å¹¶æ²¡æå¤ªå¤§çå³ç³»ï¼ä¸ä»¶äºæè¢«è¨èåºæ¥çéè¦æ§åå¤ææ§ï¼ä¸å®æè¿ä»¶äºæè±çæ¶é´ææ­£æ¯ã</p>
<p><a href="http://wiki.mbalib.com/wiki/%E5%BD%BC%E5%BE%97%E5%8E%9F%E7%90%86">å½¼å¾åç</a></p>
</blockquote>

<h2 id="toc_2">Life:</h2>
<p>1.æå¾å¿æå¤±ãèªå·±æ¸æ¥èªå·±å¾å°äºä»ä¹å­¦ä¼äºä»ä¹ï¼ä¹æ¸æ¥èªå·±æ­£å¨éæ­¥çè¿ä»ä¹ï¼å¤±å»ä»ä¹ï¼è¯¸äºä¸ºé¾åªæ±å¼é¡¾ï¼æ¿è½çè§£åè°ã</p>
<p>2.åå¤§äºåçæ´»ä¸åååå¥å­¦è¬å·ææææ§ï¼å¾é¾åæå»å¹´è·An airä»¬ä¸èµ·å¨èº«æå¥åç§æ´»å¨ï¼ä¸å¯å¦è®¤å¤§ä¸è·An airä»¬å¨ä¸èµ·æ¯ææ¬¢ä¹çæ¶åã</p>
<p>3.è¶æ¯é·å¥ææ¯è¶æ·±ï¼è¶æ¯å¯¹çæ´»ä¸­çä¸äºç»èè­¦è§ï¼ææ¥çæåï¼å¥½åçå³åï¼ç¶æ¯çæ°é®ï¼å¾æ¯æå ä¸ºåºæ§å·±è§å¤±å»æ´éè¦çä¸è¥¿ï¼ä¹å°è¯å»å¤çå¥½ã</p>
<p>4.å¼å­¦åçæ´»çèå¥æå·²è¢«å®åï¼å¤§é¨åæ¶é´æ¯åå¨åä¼ï¼æè¯¾ä¸è¯¾ï¼ä¸åæ¬¢çç¿ï¼ç¶åç»å¢åé¥­ï¼å®åç»§ç»­åä¼ï¼æå10ç¹ååå¯ãè½è¯´æ¯ç¥å¹³æ¾¹ï¼ä½ä¹çç¡®å¿çææ¥æåï¼ä¹äºå¶ä¸­ï¼æè®¸è¿ä¸ª10æè¦æ¹åä»ä¹ã</p>

<h2 id="toc_3">End:</h2>
<p>æ»çæ¥è¯´è¿ä¸ª9æè¿å¾å¾åå®ï¼å¿å¾å¼å¿ï¼å¿éä¹è§å¾è¸å®ï¼åæ¹é¢é½è¿è¡ãå±æ10æçå°æ¥:D</p>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[ISA Training Part One]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/tech/isa-training-1"/>
        <published>2013-09-27T00:00:00+08:00</published>
        <updated>2014-09-24T15:19:59+08:00</updated>
        <id>http://tinple.me/tech/isa-training-1</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <h2 id="toc_0">Our surroundings</h2>
<p>We are born in an <strong>absurd</strong> surroundings, anyway, it is really hard to release yourself 
in the prior education years.And I do not know how the bases of us hate <strong>the Oriented education.</strong>
When we come to university, Someone may complain about the differences of the foundation
between us.</p>

<blockquote>
<p>He seems to know a lot about the things, but I almost have no idea! What a fuck!</p>
</blockquote>
<p>When the <strong>psychological gap</strong> exists, you may find the world unfair. And Someone may decide
to change it.</p>

<h2 id="toc_1">Interesting</h2>

<blockquote>
<p>As for interesting concept, everyone is cup of tea.</p>
</blockquote>

<h2 id="toc_2">So what to do</h2>
<p>It is really hard to say what we really want to do now when we come to university, because the
life is full of excitement in the early time and we are almost busy with class lessons.</p>
<p>Howerver, it is fun.The most important things is what we think and decide to do, may be 
just one thing to relax ourselves, or to change the world. It almost <strong>depends on</strong> ourselves.</p>

<h2 id="toc_3">why not we begin to start it</h2>
<p>Once we had determined, why not we begin to start it?
Everything is difficult when we start it.Almost like a series of mountains.But if you
get it in the first time, you will feel delighted and may have braves to try any other
things.
It is the first step that costs troublesome.</p>

<h2 id="toc_4">Get trouble &amp;&amp; Solution</h2>
<p>We must meet trouble when we stick to everything, it is normal.
Hence, we must find the way to solve it, and it shadows our ability.
Everyone may try to exercise it and it is really essential.</p>

<h2 id="toc_5">Persisting</h2>
<p>I can not imagine how the one to be if he persist the processing, begining to start one
determination and continually solving the problem.And what I think is that is called 
<strong>development</strong>.</p>

<h2 id="toc_6">What is for</h2>
<p>It belongs to what you thinkâ¦</p>

<h2 id="toc_7">And the futureâ¦</h2>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[åå¨å¼å­¦å]]></title>
        <author><name>Tinple</name></author>
        <link href="http://tinple.me/life/write-before-start"/>
        <published>2013-09-14T00:00:00+08:00</published>
        <updated>2014-09-24T14:49:31+08:00</updated>
        <id>http://tinple.me/life/write-before-start</id>
        <content type="html" xml:base="http://tinple.me" xml:lang="en">
            <![CDATA[ <p>è½¬ç¼é©¬ä¸å°±è¦å¼å­¦äºï¼å¿ä¸­é£ä»½æªç¥çæ¸å¨ä¹æææ»çï¼æ»æè§å°è¦å°æ¥çä¸äºäºèªå·±æ²¡å¤ªå¤åºï¼ä¹ä¸ç¥éè¯¥å¦ä½æè½è®©èªå·±ä¿¡å¿æ»¡æ»¡ãå¾ä¹ä»¥åå°±æäººåè¯«æå°½ååå¥½æ¯ä¸ä»¶å«äººä¿¡ä»»ä½ æä»ä½ çäºåä½ èªå·±æ³å»åçäºãç°å¨æ³æ¥ï¼çæ­£åå¥½ä¸ä»¶äºè¿éèªå·±å¨åä¹åä¼°æ¸çåªè¦ç¡¬çå¤´ç®å»åå°±è½ä¸åè¿åèè§£ã</p>

<blockquote>
<blockquote>
<p>ä½ ææ²¡ææ³è¿ï¼ææ¶åè±å¤ªå¤çç²¾åå¨ä½ æ¿æä¸ºä¹å¾ä»çäºï¼ä½è¿ä»¶äºææåè½å¸¦ç»ä½ çé¢ä¼å¹¶ä¸å¤ã</p>
</blockquote>
</blockquote>
<p>å¾å¤æ¶åææ³ï¼é£ä¹å¤ä½ æå¾å»åçäºï¼çç¡®å­å¨å¦ä¸è¿°æè¨ï¼åå®åå¹¶æ²¡æä¸ç§éç¶ï¼æ´å¤çæ¶åå¸¦æ¥çæ¯ä¸ç§ææå»åè¿ä»¶äºè¿æ ·çæ³æ³ã</p>
<p>ä½ä¹è®¸æå¯ä»¥è¿æ ·çè§£è¿ä¸¤èä¹é´æ¢çç¾åè®©äººä¸¾æ£ä¸å®çå¾®å¦å³ç³»ï¼æå½ãè¿ä¸ç¹äºååè ï¼å ä»äººçä¿¡ä»»èå»åä»äººæä»çäºå¾å¤æ¶åå¿çååçäºèªå·±æ¸´æåçäºãèä¸æ¦æäºåºäºè¿æ ·çæ³æ³åï¼è®¸å¤æ¶åæåçäºä¹ä¸åæ¯åºäºèªå·±ç¸å³çå©ççåºåï¼æ´å¤æ¶åæ¯å»æ¿æï¼ å³ä¾¿è¿äºäºä½ æ¯«æ å©ççè³ææä¸å©ã</p>
<p>ç¶ååè°è°å¤§äºï¼ä¹åå¨<a href="http://tinple.me/life/pick-up-writing">éæ¾writing</a>ééæ§åäºä¸æ¡æ¡æ°å­¦æææ³åçäºï¼ç°å¨çæ¥åä¹æ¯å®æäºå¶ä¸­çå æ¡ï¼ä¹æ¯ç¥ææ¬£æ°ãä½ä»ç»çä¸çï¼ ä¸åä¹æç¹æå¿§ãèªå·±æåçåºæ¬ä¸æ¯åºäºèªå·±çï¼æ å³ä¹å¤çï¼æ å³ä¹å®¶åº­ï¼ä¹æ å³ä¹ç°å¨èº«è¾¹çäººãè¯·å®¹å¿ä¸ä¸ªååçäººå¾å¤æ¶åèèçæ¶ååºäºä¿æ¤èªå·±ãæè¯å°è¿ç¹ä»¥åï¼æ¥ä¸æ¥å¿ä¸­ä¹æäºä¸å®çåºã</p>

<blockquote>
<blockquote>
<p>è®¸å¤æ¶åä½ æä¸å¦æ¢å¾åºæ§è¬åæççï¼å¾å¾å¨æ«èçæ¥æ¯éçã</p>
</blockquote>
</blockquote>
<p>æè®¸ä½ èªå·±ä¹ä¸ç¥éåªä¸å¤©åå¤´ççç°å¨æåçä¸äºäºï¼æ¯å¤ä¹çä½ä¿ãæ¯«æ ä»·å¼ãè¯´çè¿äºã</p>
<p>æ¥çè°è°å­¦ä¹ ãå¤§ä¸ä¸å¹´çè¯¾èªå·±ä¸çæå¤æ°´èªå·±å¿éä¹ææ¸æ¥ï¼è¦ä¹èªå­¦ï¼è¦ä¹ææ«åè¡¥ï¼ è¯´ç½äºå°±æ¯ä¸è¯¾æ²¡å¬è¿è¯¾ãä¸ºä»ä¹æä¼æè¿æ ·çæ³æ³ï¼è·å¤§å¤æ°äººä¸æ ·ï¼è§å¾å¤§å­¦ä¸è¯¾æ²¡å¿è¦åä»¥åé£æ ·ï¼æ¯èè¯¾é½è¦å»å­¦å¥½ï¼è§å¾å¤§å­¦æ²¡ææ¡æ¡æ¡æ¡éå¶çäºï¼å°±è¦è£åºä¸å¯æ´è±çæ ·å­äº«åå¤§å­¦æ ææ æçæ¥å­ãåæèæ´å¤çæ¶åå¯ä»¥è§£éä¸ºå¤§å­¦è®©äººæ²¡æå®å¨æï¼è®¸å¤äººæçä¸è¿çè¯¾è½ç»èªå·±å°æ¥å¸¦æ¥å¤å°å¯è½æ§ï¼æ¯ç«ä¸çæ¯ä¸æ ·çè¯¾ï¼ä¸æ¯è¯´ä½ åªåå­¦çå¥½å°±è½æ¯å«äººå¤ä»½å¸æï¼ å°±å¦èè¯ä¸æ ·ï¼å¾å¾å¯¹ç»ææ¯«æ å½±åã</p>

<blockquote>
<blockquote>
<p>é»éæååï¼æ¯ä¸æä¸æ»ã</p>
</blockquote>
</blockquote>
<p>ä¸æ¥æ¯å¤§å­¦çè¯¾ç¨ï¼äºæ¥ä¾¿æ¯ä¸ä¸çé®é¢ãå¤§é¨åäººä¸ç¥éèªå·±æå¨çä¸ä¸å°æ¥è½å¹²åï¼åºæ¬ä¸å¯¹å¤§å­¦æå®ä½çä¸ä¸æ¯«æ æè§ï¼æ´å¤çæ¶åæ¯ç´æ¥å»è¯¢é®é¿ä¸è¾çäººï¼çè³è¿èªå·±çæ³æ³é½æ²¡å¤¹æä¸ä¸ãå¨è¿æ ·çæåµä¸ï¼åæ¯è·ç´§å¤§å­¦çç¸å³&quot;éèº«å®å¶&quot;åºæ¬ä¸å°±æ¯ä¸ä¸ªåå°æ²¡æ°´åçåé»ä¹è§çå§æäºã</p>
<p>è¯´äºè¿ä¹å¤è´¬ä½çè¯ï¼å¶å®æ²¡å¿è¦å»ç¸ä¿¡ï¼æèªå·±ä¹ä¸ç¸ä¿¡èªå·±è¯´çãæ­£æè°æ¯ä¸æä¸æ»ï¼ ä¸æ¦ä½ åç±èªå·±æå¨çé¢åï¼å»ä¸å¿å­¦ä¹ å¶å®æ¯ä»¶å¾äº«åçäºãå¶å®å¤§äºæå¾å¤è¯¾æéå¸¸æå´è¶£ï¼ å¾å¤æ¶åæè§å¾å­¦ä¹ çç¡®æ¯ä»¶ç¾å¥½çäºï¼å°¤å¶æ¯å­¦ä¹ é£äºå¾çèªå·±å¿çä¸è¥¿ï¼é£ç§åå®çæè§ï¼å¾æ¸©æã</p>
<p>æåè¯´è¯´ææãç®äºä¸è¯´äºã</p>
<p>æææ£æ£è¯´äºé£ä¹å¤æ å³çççäºï¼ä¹åªæ¯å¯¹å¤§äºå®äºä¸ªåºè°ãä¸è¿è°ç¥éå¢ï¼ä¹è®¸å°æ¥æä¸å¤©åè¿å¤´æ¥å°è¿ä¸åå¨çå¦å®ãå§ä¸å°±è¿ä¹è¿è¡ä¸å»å§ã<strong>ä¹ç¥æå¤©å®åè¿æ°å®£è®²é¡ºå©:D</strong></p>
]]>
        </content>
    </entry>
</feed>